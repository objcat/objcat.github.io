# ğŸ ç®€ä»‹

```
ioGame
æ— é”å¼‚æ­¥åŒ–ã€äº‹ä»¶é©±åŠ¨çš„æ¶æ„è®¾è®¡ï¼›è½»é‡çº§ï¼Œæ— éœ€ä¾èµ–ä»»ä½•ç¬¬ä¸‰æ–¹ä¸­é—´ä»¶æˆ–æ•°æ®åº“å°±èƒ½æ”¯æŒé›†ç¾¤ã€åˆ†å¸ƒå¼
é€šè¿‡ ioGame å¯ä»¥å¾ˆå®¹æ˜“çš„æ­å»ºå‡ºä¸€ä¸ªé›†ç¾¤æ— ä¸­å¿ƒèŠ‚ç‚¹ã€é›†ç¾¤è‡ªåŠ¨åŒ–ã€å¤šè¿›ç¨‹çš„åˆ†å¸ƒå¼æ¸¸æˆæœåŠ¡å™¨
åŒ…ä½“å°ã€å¯åŠ¨å¿«ã€å†…å­˜å ç”¨å°‘ã€æ›´åŠ çš„èŠ‚çº¦ã€æ— éœ€é…ç½®æ–‡ä»¶ã€æä¾›äº†ä¼˜é›…çš„è·¯ç”±è®¿é—®æƒé™æ§åˆ¶
å¯åŒæ—¶æ”¯æŒå¤šç§è¿æ¥æ–¹å¼ï¼šWSã€UDPã€TCP...ç­‰ï¼›æ¡†æ¶å·²æ”¯æŒå…¨é“¾è·¯è°ƒç”¨æ—¥å¿—è·Ÿè¸ªç‰¹æ€§
è®©å¼€å‘è€…ç”¨ä¸€å¥—ä¸šåŠ¡ä»£ç ï¼Œèƒ½è½»æ¾åˆ‡æ¢å’Œæ‰©å±•ä¸åŒçš„æ•°æ®åè®®ï¼šProtobufã€JSON
è¿‘åŸç”Ÿçš„æ€§èƒ½ï¼›ä¸šåŠ¡æ¡†æ¶åœ¨å•çº¿ç¨‹ä¸­å¹³å‡æ¯ç§’å¯ä»¥æ‰§è¡Œ 1152 ä¸‡æ¬¡ä¸šåŠ¡é€»è¾‘
ä»£ç å³è”è°ƒæ–‡æ¡£ã€JSR380éªŒè¯ã€æ–­è¨€ + å¼‚å¸¸æœºåˆ¶ = æ›´å°‘çš„ç»´æŠ¤æˆæœ¬
æ¡†æ¶å…·å¤‡æ™ºèƒ½çš„åŒè¿›ç¨‹äº²å’Œæ€§ï¼›å¼€å‘ä¸­ï¼Œä¸šåŠ¡ä»£ç å¯å®šä½ä¸è·³è½¬
æ¶æ„éƒ¨ç½²çµæ´»æ€§ä¸å¤šæ ·æ€§ï¼šæ—¢å¯ç›¸äº’ç‹¬ç«‹ï¼Œåˆå¯ç›¸äº’èåˆ
ä¸€æ¬¡ç¼–å†™åˆ°å¤„å¯¹æ¥ï¼Œèƒ½ä¸ºå®¢æˆ·ç«¯ç”Ÿæˆå¯äº¤äº’çš„ä»£ç 
é€»è¾‘æœä¹‹é—´å¯ç›¸äº’è·¨è¿›ç¨‹ã€è·¨æœºå™¨è¿›è¡Œé€šä¿¡
æ”¯æŒç©å®¶å¯¹æ¸¸æˆé€»è¾‘æœè¿›è¡ŒåŠ¨æ€ç»‘å®š
èƒ½ä¸ä»»ä½•å…¶ä»–æ¡†æ¶åšèåˆå…±å­˜
å¯¹ webMVC å¼€å‘è€…å‹å¥½
æ—  spring å¼ºä¾èµ–
é›¶å­¦ä¹ æˆæœ¬
javaSE
```

https://iohao.github.io/game/

# ğŸ å¿«é€Ÿå¼€å§‹

## ğŸŒ² ç¯å¢ƒ

è¿™æ˜¯æˆ‘çš„ç¯å¢ƒ

- IDEA 2025.1
- MAVEN 3.9.11
- JAVA21

è¯¥ä¸‹çš„ä¸‹, è¯¥é…çš„é…, éƒ½å‡†å¤‡å¥½

## ğŸŒ² å¯åŠ¨æœåŠ¡ç«¯

æˆ‘ä»¬ç›´æ¥ä¸‹è½½ä»–çš„`Demo`

https://github.com/iohao/ioGameSimpleOne

ç„¶åæˆ‘ä»¬æ‰“å¼€é¡¹ç›®

![](images/Pasted%20image%2020250819183413.png)

é…ç½®`maven`

[mavenæ•™ç¨‹](../../../4-package-manager/maven/maven.md)

ç„¶åç›´æ¥æ‹‰å–ä¾èµ–...

å¥½çš„è¿›å…¥æ­£é¢˜, æ ¹æ®æ–‡æ¡£æˆ‘ä»¬çŸ¥é“äº†ä¸¤ä»¶äº‹

```
è¿è¡Œæ­¥éª¤

æœåŠ¡å™¨å¯åŠ¨ç±» DemoApplication.java
æ¨¡æ‹Ÿå®¢æˆ·ç«¯å¯åŠ¨ç±» DemoClient.java
```

å¯ä»¥çœ‹å¾—å‡ºæ¥ä½œè€…éå¸¸è´´å¿ƒ, è®¾è®¡äº†å¯åŠ¨æœåŠ¡å™¨çš„æ¡ˆä¾‹å’Œæ¨¡æ‹Ÿå®¢æˆ·ç«¯è¿æ¥çš„æ¡ˆä¾‹, æˆ‘ä»¬é¦–å…ˆæ‰¾åˆ°`DemoApplication`, ç„¶åç›´æ¥å³é”®å¯åŠ¨å°±è¡Œ

```java
package com.iohao.one.example;

import com.iohao.game.external.core.netty.simple.NettySimpleHelper;

import java.util.List;
import java.util.Locale;

/**
 * @author æ¸”æ°‘å°é•‡
 * @date 2023-01-06
 */
public class DemoApplication {
    public static void main(String[] args) {
        Locale.setDefault(Locale.US);
        // æ¸¸æˆå¯¹å¤–æœç«¯å£
        int port = 10100;
        // æ¸¸æˆé€»è¾‘æœ
        var demoLogicServer = new DemoLogicServer();
        // å¯åŠ¨
        NettySimpleHelper.run(port, List.of(demoLogicServer));
    }
}
```

å¯åŠ¨åæ˜¯è¿™æ ·çš„æ—¥å¿—

```shell
Sofa-Middleware-Log SLF4J : Actual binding is of type [ com.alipay.remoting Logback ]
37:53 [ain] INFO  c.a.s.c.log.report(ReportUtil.java:30) Sofa-Middleware-Log SLF4J : Actual binding is of type [ com.alipay.remoting Logback ]
37:54 [d-3] INFO  CommonStdout.createMicroBootstrap(DefaultExternalCore.java:71) GameExternalServer port: [10100] - Connection way: [WebSocket] 
37:54 [d-1] INFO  CommonStdout.extractedLog(BrokerServer.java:113) GameBrokerServer port:[10200] - Startup Mode:[Standalone] 
37:54 [d-1] INFO  ConnectionTopic.extractedPrint(ConnectionEventBrokerProcessor.java:87) Broker ConnectionEventType:ã€CONNECTã€‘ remoteAddress:ã€127.0.0.1:53141ã€‘ï¼ŒConnection:ã€com.alipay.remoting.Connection@73880afdã€‘
37:54 [6-3] INFO  ConnectionTopic.extracted(ConnectEventClientProcessor.java:86) ConnectionEventType:ã€CONNECTã€‘ remoteAddress:ã€127.0.0.1:10200ã€‘ï¼ŒNumber of GameBrokerServer connections:ã€1ã€‘ï¼ŒregisterActive:ã€0ã€‘
37:54 [d-2] INFO  CommonStdout.print(RegisterBrokerClientModuleMessageBrokerProcessor.java:129) Module registration information --- GameBrokerServer port: [10200] --- BrokerClientModuleMessage(header={}, name=GameExternalServer, tag=external, status=1, withNo=-1488348302, brokerClientType=EXTERNAL, id=a1263671-9f6d-45d5-bef0-422fd0ea8733, idHash=-1279349633, address=127.0.0.1:53141, ioGamePid=86aff8cd-bef6-49cb-a483-b85d6abd6458)
37:54 [d-2] INFO  CommonStdout.print(BrokerPrintKit.java:73) GameBrokerServer:10200 --- gameLogicServerList: 
	{Number of servers:1, tag:'external'}
======================== ioGame Business Framework ========================= 
21.30
BLACK RED GREEN YELLOW BLUE MAGENTA CYAN WHITE DEFAULT
======================== Handler ========================= 
To turn off printing, see BarSkeletonBuilder.setting.printHandler
class com.iohao.game.action.skeleton.core.ActionCommandHandler 
======================== Plugin ========================= 
To turn off printing, see BarSkeletonBuilder.setting.printInout
class com.iohao.game.action.skeleton.core.flow.internal.DebugInOut 
======================== DataCodec ========================= 
To turn off printing, see BarSkeletonBuilder.setting.printDataCodec
j-protobuf - com.iohao.game.action.skeleton.core.codec.ProtoDataCodec 
======================== action ========================= 
To turn off printing, see BarSkeletonBuilder.setting.printAction
Print the full package name, see BarSkeletonBuilder.setting.printActionShort
Routing: 1 - 0 --- action : DemoAction.here(HelloMessage helloMessage)  --- return HelloMessage  ~~~ see.(DemoAction.java:43)
Routing: 1 - 1 --- action : DemoAction.jackson(HelloMessage helloMessage)  --- return HelloMessage  ~~~ see.(DemoAction.java:56)
Routing: 1 - 2 --- action : DemoAction.list()  --- return List<HelloMessage>  ~~~ see.(DemoAction.java:69)

37:54 [6-3] INFO  ConnectionTopic.extracted(ConnectEventClientProcessor.java:86) ConnectionEventType:ã€CONNECTã€‘ remoteAddress:ã€127.0.0.1:10200ã€‘ï¼ŒNumber of GameBrokerServer connections:ã€1ã€‘ï¼ŒregisterActive:ã€0ã€‘
37:54 [d-1] INFO  ConnectionTopic.extractedPrint(ConnectionEventBrokerProcessor.java:87) Broker ConnectionEventType:ã€CONNECTã€‘ remoteAddress:ã€127.0.0.1:53142ã€‘ï¼ŒConnection:ã€com.alipay.remoting.Connection@1f23d074ã€‘
37:54 [d-4] INFO  CommonStdout.print(RegisterBrokerClientModuleMessageBrokerProcessor.java:129) Module registration information --- GameBrokerServer port: [10200] --- BrokerClientModuleMessage(header={}, name=demoLogicServer, tag=demoLogicServer, status=1, withNo=-1488348302, brokerClientType=LOGIC, id=0d986c28-f5f7-4ea7-8a30-6ad76bdab9fb, idHash=789338557, address=127.0.0.1:53142, ioGamePid=86aff8cd-bef6-49cb-a483-b85d6abd6458)
37:54 [d-4] INFO  CommonStdout.print(BrokerPrintKit.java:73) GameBrokerServer:10200 --- gameLogicServerList: 
	{Number of servers:1, tag:'demoLogicServer'}
	{Number of servers:1, tag:'external'}

.------..------..------..------..------..------.
|I.--. ||O.--. ||G.--. ||A.--. ||M.--. ||E.--. |
| (\/) || :/\: || :/\: || (\/) || (\/) || (\/) |
| :\/: || :\/: || :\/: || :\/: || :\/: || :\/: |
| '--'I|| '--'O|| '--'G|| '--'A|| '--'M|| '--'E|
`------'`------'`------'`------'`------'`------'

+----------+-----------------------##-------------+---------##---------+-------------------------
| ioGame                           ## Memory                ## Time                            
+----------+-----------------------##-------------+---------##---------+-------------------------
| pid      | 12924                 ## used        | 64.39MB ## start   | 2025-08-19 18:37:53.924 
| version  | 21.30                 ## freeMemory  | 15.61MB ## end     | 2025-08-19 18:37:54.408 
| document | http://game.iohao.com ## totalMemory | 80.0MB  ## consume | 0.48 s                  
+----------+-----------------------##-------------+---------##---------+-------------------------
|          | ioGame issues - https://github.com/iohao/ioGame/issues
+----------+--------------------------------------------------------------------------------------
| adv      | Room games in action - https://iohao.github.io/game/docs/practices/room_in_action
+----------+--------------------------------------------------------------------------------------
| News     | Business Framework - Introduction - https://iohao.github.io/game/docs/core/framework
| News     | ExternalServer - User online and offline hooks - https://iohao.github.io/game/docs/external/user_hook
+----------+--------------------------------------------------------------------------------------
```

## ğŸŒ² å¯åŠ¨å®¢æˆ·ç«¯

æœåŠ¡ç«¯æˆ‘ä»¬å·²ç»å¯åŠ¨å¥½äº†, æ¥ä¸‹æ¥æˆ‘ä»¬æ¥æ¨¡æ‹Ÿä¸€ä¸‹å®¢æˆ·ç«¯è¿æ¥æœåŠ¡ç«¯, æ‰¾åˆ°`DemoClient.java`

```java
/*
 * ioGame
 * Copyright (C) 2021 - 2023  æ¸”æ°‘å°é•‡ ï¼ˆ262610965@qq.comã€luoyizhu@gmail.comï¼‰ . All Rights Reserved.
 * # iohao.com . æ¸”æ°‘å°é•‡
 *
 * This program is free software: you can redistribute it and/or modify
 * it under the terms of the GNU Affero General Public License as
 * published by the Free Software Foundation, either version 3 of the
 * License, or (at your option) any later version.
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU Affero General Public License for more details.
 *
 * You should have received a copy of the GNU Affero General Public License
 * along with this program.  If not, see <https://www.gnu.org/licenses/>.
 */
package com.iohao.one.example.client;

import com.iohao.game.external.client.join.ClientRunOne;
import com.iohao.game.external.client.kit.ClientUserConfigs;

import java.util.List;

/**
 * @author æ¸”æ°‘å°é•‡
 * @date 2023-07-17
 */
public class DemoClient {
    public static void main(String[] args) {
        // closeLog. cn: å…³é—­æ¨¡æ‹Ÿè¯·æ±‚ç›¸å…³æ—¥å¿—
        ClientUserConfigs.closeLog();
        // Startup Client. cn: å¯åŠ¨æ¨¡æ‹Ÿå®¢æˆ·ç«¯
        new ClientRunOne()
                .setInputCommandRegions(List.of(new DemoRegion()))
                .startup();
    }
}
```

ç„¶åæˆ‘ä»¬ç›´æ¥å³é”®è¿è¡Œ, æ¨¡æ‹Ÿå®¢æˆ·ç«¯å¯åŠ¨æ˜¯è¿™æ ·çš„, çœ‹åˆ°è¿™ä¸ªç•Œé¢è¯´æ˜æˆ‘ä»¬å·²ç»å’ŒæœåŠ¡å™¨`è¿æ¥æˆåŠŸäº†`, å¦‚æœæœåŠ¡å™¨æ²¡æœ‰å¯åŠ¨å®¢æˆ·ç«¯ä¼šæç¤ºæ¥è¿æ¥é”™è¯¯

```shell
41:39 [ain] INFO  CommonStdout.startup(ClientRunOne.java:99) å¯åŠ¨æˆåŠŸ
æç¤ºï¼š[å‘½ä»¤æ‰§è¡Œ : cmd-subCmd] [é€€å‡º : q] [å¸®åŠ© : help]
```

ç„¶åæˆ‘ä»¬å¯ä»¥åœ¨å®¢æˆ·ç«¯ä¸‹å»è¾“å…¥æŒ‡ä»¤`help`å°±æ˜¯å¼¹å‡ºå¸®åŠ©èœå•

```shell
help
---------- cmd help ----------
1-0    :    here
1-1    :    Jackson
1-2    :    list
```

ç„¶åæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ä½œè€…æä¾›äº†å‡ ä¸ªå‘½ä»¤è®©æˆ‘ä»¬å°è¯•, æˆ‘ä»¬å…ˆè¯•è¯•`1-0`

```shell
1-0
1-0    :    here
æç¤ºï¼š[å‘½ä»¤æ‰§è¡Œ : cmd-subCmd] [é€€å‡º : q] [å¸®åŠ© : help]
42:19 [-47] INFO  c.i.o.e.c.DemoRegion.lambda$initInputCommand$1(DemoRegion.java:49) HelloMessage{name='1, I'm here'}
```

å¯ä»¥çœ‹åˆ°æ˜¯æœ‰è¾“å‡ºçš„, æˆ‘ä»¬æ¥çœ‹çœ‹æœåŠ¡å™¨çš„æ—¥å¿—

```shell
â”â”â”â”â”â” Debug. [(DemoAction.java:43).here] â”â”â”â”â” [cmd:1-0 65536] â”â”â”â”â” [demoLogicServer] â”â”â”â”â” [id:0d986c28-f5f7-4ea7-8a30-6ad76bdab9fb]
â”£ userId: 0
â”£ RequestParam: helloMessage : HelloMessage{name='1'}
â”£ ResponseData: HelloMessage{name='1, I'm here'}
â”£ ExecutionTime: 7 ms
	â”—â”â”â”â”â” [ioGame:21.30] â”â”â”â”â” [Thread:User-16-4] â”â”â”â”â” [Connection way:WebSocket] â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
```

ä¸å¾—ä¸è¯´, è¿™ä¸ªæ—¥å¿—æ ¼å¼åšçš„çœŸæ˜¯`èµå¿ƒæ‚¦ç›®`, æˆ‘è¿™é‡Œæˆ‘ä»¬çš„æœåŠ¡å™¨å’Œå®¢æˆ·ç«¯å·²ç»å¯ä»¥é€šä¿¡äº†

## ğŸŒ² æŸ¥çœ‹socketçš„è¿æ¥æƒ…å†µ

æˆ‘ä»¬ä½¿ç”¨`netstat`å‘½ä»¤

```shell
netstat -ano | findstr ":10100"

TCP    0.0.0.0:10100          0.0.0.0:0              LISTENING       12924
TCP    127.0.0.1:10100        127.0.0.1:53344        ESTABLISHED     12924
TCP    127.0.0.1:53344        127.0.0.1:10100        ESTABLISHED     31220
TCP    [::]:10100             [::]:0                 LISTENING       12924
```

å¯ä»¥çœ‹åˆ°`[::]:10100å’Œ0.0.0.0:10100`è¡¨ç¤ºæœåŠ¡å™¨åœ¨`10100`ç«¯å£ä½¿ç”¨`IPV6å’ŒIPV4`è¿›è¡Œ`LISTENING`ç›‘å¬

```
TCP    127.0.0.1:10100        127.0.0.1:53344        ESTABLISHED     12924
TCP    127.0.0.1:53344        127.0.0.1:10100        ESTABLISHED     31220
```

ä¸­é—´çš„ä¸¤æ¡è¡¨ç¤º`å®¢æˆ·ç«¯ä¸æœåŠ¡ç«¯`å·²ç»å»ºç«‹äº†`TCP`è¿æ¥, ä¸€ä¸ª TCP è¿æ¥åªæœ‰ä¸€æ¡(åè®®å±‚é¢)ï¼Œä½†æ˜¯åœ¨æ“ä½œç³»ç»Ÿé‡Œ,, `æœåŠ¡ç«¯`å’Œ`å®¢æˆ·ç«¯`å„è‡ªæŒæœ‰ä¸€ä¸ª socket, æ‰€ä»¥`netstat`ä¼šæ˜¾ç¤ºä¸¤æ¡è®°å½•, è¿™ä¸¤ä¸ª socket äº’ä¸ºå¯¹ç«¯, å®ƒä»¬æ„æˆå®Œæ•´çš„åŒå‘é€šä¿¡é€šé“




