# ğŸ ç®€ä»‹

é˜¿é‡Œäº‘å¯¹è±¡å­˜å‚¨ OSSï¼ˆObject Storage Serviceï¼‰æ˜¯ä¸€æ¬¾æµ·é‡ã€å®‰å…¨ã€ä½æˆæœ¬ã€é«˜å¯é çš„äº‘å­˜å‚¨æœåŠ¡ï¼Œæä¾›æœ€é«˜å¯è¾¾ 99.995 % çš„æœåŠ¡å¯ç”¨æ€§ã€‚å¤šç§å­˜å‚¨ç±»å‹ä¾›é€‰æ‹©ï¼Œå…¨é¢ä¼˜åŒ–å­˜å‚¨æˆæœ¬ã€‚

# ğŸ å¿«é€Ÿå¼€å§‹

## ğŸŒ² å¼€å¯OSS

æˆ‘ä»¬ä½¿ç”¨`é˜¿é‡Œäº‘OSS`, æ³¨å†Œè´¦å·å°±ä¸è¯´äº†

![](images/Pasted%20image%2020231010164758.png)

ç„¶åç‚¹å‡»åˆ›å»º`bucket`, é€šå¸¸ä¸€ä¸ªé¡¹ç›®ä½¿ç”¨ä¸€ä¸ª`bucket`

![](images/Pasted%20image%2020231010170119.png)

è¯»å†™æƒé™æ”¹æˆ`å…¬å…±è¯»`, ç„¶åç‚¹å‡»åˆ›å»º

![](images/Pasted%20image%2020231010170217.png)

åˆ›å»ºæˆåŠŸåæ˜¯è¿™ä¸ªæ ·å­çš„, æˆ‘ä»¬ç‚¹å‡»ä¸Šä¼ å›¾ç‰‡, å¯ä»¥å°è¯•å…ˆä¸Šä¼ ä¸€å¼ 

![](images/Pasted%20image%2020231010170609.png)

æ‹–æ‹½ä¸Šå»ç„¶åç‚¹å‡»ä¸Šä¼ 

![](images/Pasted%20image%2020231010170552.png)

ä¸Šä¼ æˆåŠŸåæˆ‘ä»¬ç‚¹å‡»å›¾ç‰‡è®¿é—®ä¸€ä¸‹

![](images/Pasted%20image%2020231010170741.png)

ä¸‹é¢çš„URLé“¾æ¥ç‚¹å‡»å°±å¯ä»¥ä¸‹è½½, è¿™è¯´æ˜æˆ‘ä»¬çš„`OSSå­˜å‚¨`å¯åŠ¨æˆåŠŸäº†

ç„¶åæˆ‘ä»¬çœ‹ä¸€ä¸‹è®¡è´¹æ ‡å‡†

![](images/Pasted%20image%2020231010165646.png)

è²Œä¼¼æœ‰5ä¸ªGçš„å…è´¹é¢åº¦, è¿˜å¾…æµ‹è¯•

## ğŸŒ² ä¸Šä¼ æ–¹å¼

æƒ³è¦ä¸Šä¼ å›¾ç‰‡, å°±è¦äº†è§£æˆ‘ä»¬ä¸Šä¼ çš„å›¾ç‰‡è¦æ€ä¹ˆå­˜åˆ°`OSS`ä¸Š

### ğŸŒ¸ åå°ä¸Šä¼ æ³•

æˆ‘ä»¬å…ˆæŠŠå›¾ç‰‡ä¸Šä¼ åˆ°æˆ‘ä»¬åå°, ç„¶åå†ç”±åå°è°ƒç”¨`OSS`çš„æ¥å£ä¸Šä¼ åˆ°`OSS`, ä¼˜ç‚¹æ˜¯å®‰å…¨, ç¼ºç‚¹æ˜¯ä¼šé€ æˆæœåŠ¡å™¨çš„å‹åŠ›, å› ä¸ºä¸Šä¼ å›¾ç‰‡ä¼šå ç”¨å¾ˆå¤§çš„å¸¦å®½

### ğŸŒ¸ åå°ç­¾åä¸Šä¼ æ³•

ç”±åå°ç”Ÿæˆç­¾å, ç„¶åå›¾ç‰‡ç›´æ¥ç”±å‰ç«¯é€šè¿‡`OSS`çš„æ¥å£å¸¦ä¸Šç­¾åè¿›è¡Œä¸Šä¼ 

## ğŸŒ² å¯¼å…¥SDK

https://help.aliyun.com/zh/oss/developer-reference/java-installation?spm=a2c4g.11186623.0.0.a55fb417lsoY6Y

ç‚¹å‡»ä¸Šé¢çš„æ–‡æ¡£å¯ä»¥çœ‹åˆ°, é˜¿é‡Œäº‘ç»™æˆ‘ä»¬æä¾›äº†ä¸€å¥—`SDK`, ä¸“é—¨ç”¨äºä¸Šä¼ æ–‡ä»¶, é‡Œé¢ä¹Ÿä¼šåŒ…å«ç”Ÿæˆç­¾å, æˆ‘ä»¬ç°åœ¨å°±æ¥é›†æˆå§

### ğŸŒ¸ æ·»åŠ ä¾èµ–

ç›´æ¥æ·»åŠ åœ¨`product`ä¸­, ä¸è¦è·Ÿéšè§†é¢‘æ·»åŠ åˆ°`common`

```xml
<dependency>
    <groupId>com.aliyun.oss</groupId>
    <artifactId>aliyun-sdk-oss</artifactId>
    <version>3.15.1</version>
</dependency>
```

### ğŸŒ¸ æµ‹è¯•æ–‡ä»¶ä¸Šä¼ 

æ ¹æ®æ–‡æ¡£(ç®€å•ä¸Šä¼ )

https://help.aliyun.com/zh/oss/developer-reference/simple-upload-11?spm=a2c4g.11186623.0.0.68cb2921ZEb6qy

æˆ‘ä»¬å†™ä¸€ä¸ªæµ‹è¯•ç±»æ¥æµ‹è¯•æ–‡ä»¶ä¸Šä¼ , æˆ‘ä»¬æ–°å»º`BrandControllerTests`æµ‹è¯•æ–‡ä»¶, ç„¶åæŠŠæ–‡æ¡£é‡Œçš„ä»£ç ç›´æ¥ç²˜è´´è¿‡æ¥

```java
@Test
public void test() {
	// Endpointä»¥åä¸œ1ï¼ˆæ­å·ï¼‰ä¸ºä¾‹ï¼Œå…¶å®ƒRegionè¯·æŒ‰å®é™…æƒ…å†µå¡«å†™ã€‚
	String endpoint = "https://oss-cn-shanghai.aliyuncs.com";
	// å¡«å†™Bucketåç§°ï¼Œä¾‹å¦‚examplebucketã€‚
	String bucketName = "gulimall2024";
	// å¡«å†™Objectå®Œæ•´è·¯å¾„ï¼Œå®Œæ•´è·¯å¾„ä¸­ä¸èƒ½åŒ…å«Bucketåç§°ï¼Œä¾‹å¦‚exampledir/exampleobject.txtã€‚
	String objectName = "exampledir/baimao.jpg";
	// å¡«å†™æœ¬åœ°æ–‡ä»¶çš„å®Œæ•´è·¯å¾„ï¼Œä¾‹å¦‚D:\\localpath\\examplefile.txtã€‚
	// å¦‚æœæœªæŒ‡å®šæœ¬åœ°è·¯å¾„ï¼Œåˆ™é»˜è®¤ä»ç¤ºä¾‹ç¨‹åºæ‰€å±é¡¹ç›®å¯¹åº”æœ¬åœ°è·¯å¾„ä¸­ä¸Šä¼ æ–‡ä»¶æµã€‚
	String filePath = "/users/objcat/desktop/baimao.jpg";

	String accessKey = "";
	String accessSecret = "";

	// åˆ›å»ºOSSClientå®ä¾‹ã€‚
	OSS ossClient = new OSSClientBuilder().build(endpoint, accessKey, accessSecret);

	try {
		InputStream inputStream = new FileInputStream(filePath);
		// åˆ›å»ºPutObjectRequestå¯¹è±¡ã€‚
		PutObjectRequest putObjectRequest = new PutObjectRequest(bucketName, objectName, inputStream);
		// åˆ›å»ºPutObjectè¯·æ±‚ã€‚
		PutObjectResult result = ossClient.putObject(putObjectRequest);
		System.out.println(result);
	} catch (OSSException oe) {
		System.out.println("Caught an OSSException, which means your request made it to OSS, " + "but was rejected with an error response for some reason.");
		System.out.println("Error Message:" + oe.getErrorMessage());
		System.out.println("Error Code:" + oe.getErrorCode());
		System.out.println("Request ID:" + oe.getRequestId());
		System.out.println("Host ID:" + oe.getHostId());
	} catch (FileNotFoundException e) {
		throw new RuntimeException(e);
	} finally {
		if (ossClient != null) {
			ossClient.shutdown();
		}
	}
}
```

åœ¨é…ç½®è¿‡ç¨‹ä¸­æˆ‘é‡åˆ°ä¸€ä¸ªé—®é¢˜`Exception 'com.aliyuncs.exceptions.ClientException' is never thrown in the corresponding try block`, æˆ‘æ²¡æœ‰æ‰¾åˆ°è§£å†³è¿™ä¸ªé—®é¢˜çš„æ–¹æ³•, æ‰€ä»¥æˆ‘ç§»é™¤äº†`ClientException`çš„æ•è·

### ğŸŒ¸ è·å–ç§˜é’¥

è·å–ç§˜é’¥ä¹Ÿæ¯”è¾ƒç®€å•, æˆ‘ä»¬ç‚¹å‡»`AccessKeyç®¡ç†`

![](images/Pasted%20image%2020231010180604.png)

æˆ‘ä»¬é€‰æ‹©å³è¾¹çš„ã€Œå¼€å§‹ä½¿ç”¨å­ç”¨æˆ·AccessKeyã€, å› ä¸ºå‰é¢çš„keyæƒé™å¤ªå¤§, åé¢çš„keyæ¯”è¾ƒå®‰å…¨

![](images/Pasted%20image%2020231010180405.png)

ç„¶åä¼šè¿›å…¥åˆ°`RAMè®¿é—®æ§åˆ¶`, æ³¨æ„è¿™ä¸ª`RAM`å¯ä¸æ˜¯å†…å­˜, è€Œæ˜¯`è®¿é—®æ§åˆ¶RAMï¼ˆResource Access Managementï¼‰æ˜¯é˜¿é‡Œäº‘æä¾›çš„ç®¡ç†ç”¨æˆ·èº«ä»½ä¸èµ„æºè®¿é—®æƒé™çš„æœåŠ¡ã€‚`

ç„¶åæˆ‘ä»¬ç‚¹å‡»åˆ›å»ºç”¨æˆ·

![](images/Pasted%20image%2020231010181001.png)

ç„¶åå¡«å†™

![](images/Pasted%20image%2020231010181100.png)

ç„¶åå°±èƒ½çœ‹åˆ°`key`å’Œ`secret`äº†, æˆ‘çš„è‡ªå·±éšè—äº†, ä½ è‡ªå·±åˆ›å»º

![](images/Pasted%20image%2020231010181153.png)

ç„¶åé…ç½®æƒé™, æˆ‘ä»¬ç‚¹å‡»ç”¨æˆ·

![](images/Pasted%20image%2020231010181402.png)

å¯ä»¥æ‰¾åˆ°ä¸€ä¸ª`æ·»åŠ æƒé™`çš„æŒ‰é’®

![](images/Pasted%20image%2020231010181419.png)

ç„¶åç‚¹å‡»æ·»åŠ æƒé™

![](images/Pasted%20image%2020231010181341.png)

æˆæƒæˆåŠŸåæˆ‘ä»¬æŠŠç§˜é’¥ç›´æ¥å¡«å†™åœ¨ä»£ç é‡Œå°±èƒ½å¤Ÿä¸Šä¼ äº†

### ğŸŒ¸ æµ‹è¯•ä¸Šä¼ 

ä¸Šä¼ æˆåŠŸåæˆ‘ä»¬å»é˜¿é‡Œäº‘ä¸Šçœ‹ä¸€çœ‹

![](images/Pasted%20image%2020231010201108.jpg)

åˆ°è¿™é‡Œå›¾ç‰‡ä¸Šä¼ æˆåŠŸäº†

## ğŸŒ² starteråŒ…

é˜¿é‡Œäº‘ä¹Ÿç»™æˆ‘ä»¬æä¾›äº†`starter`åŒ…, å¯ä»¥å¸®æˆ‘ä»¬å°‘å†™å¾ˆå¤šä»£ç , åªéœ€è¦ç®€å•çš„é…ç½®

### ğŸŒ¸ æ·»åŠ ä¾èµ–

```xml
<dependency>
	<groupId>com.alibaba.cloud</groupId>
	<artifactId>spring-cloud-starter-alicloud-oss</artifactId>
	<version>2.2.0.RELEASE</version>
</dependency>
```

### ğŸŒ¸ é…ç½®

```yml
spring:
  cloud:
    alicloud:
      access-key: xxx
      secret-key: xxx
      oss:
        endpoint: oss-cn-shanghai.aliyuncs.com
```

### ğŸŒ¸ æµ‹è¯•

```java
@Resource
private OSSClient ossClient;
    
@Test
public void test2() throws FileNotFoundException {
	// å¡«å†™Bucketåç§°ï¼Œä¾‹å¦‚examplebucketã€‚
	String bucketName = "gulimall2024";
	// å¡«å†™Objectå®Œæ•´è·¯å¾„ï¼Œå®Œæ•´è·¯å¾„ä¸­ä¸èƒ½åŒ…å«Bucketåç§°ï¼Œä¾‹å¦‚exampledir/exampleobject.txtã€‚
	String objectName = "exampledir/baimao.jpg";
	// å¦‚æœæœªæŒ‡å®šæœ¬åœ°è·¯å¾„ï¼Œåˆ™é»˜è®¤ä»ç¤ºä¾‹ç¨‹åºæ‰€å±é¡¹ç›®å¯¹åº”æœ¬åœ°è·¯å¾„ä¸­ä¸Šä¼ æ–‡ä»¶æµã€‚
	String filePath = "/users/objcat/desktop/baimao.jpg";
	InputStream inputStream = new FileInputStream(filePath);
	// åˆ›å»ºPutObjectRequestå¯¹è±¡ã€‚
	PutObjectRequest putObjectRequest = new PutObjectRequest(bucketName, objectName, inputStream);
	// åˆ›å»ºPutObjectè¯·æ±‚ã€‚
	PutObjectResult result = ossClient.putObject(putObjectRequest);
	System.out.println(result);
}
```

ä¸ºäº†æµ‹è¯•æœ‰æ•ˆæ€§æˆ‘ä»¬æŠŠäº‘ä¸Šçš„å›¾ç‰‡åˆ äº†, é‡æ–°æµ‹è¯•ä¸Šä¼ ä¹Ÿæ˜¯å¯ä»¥ä¸Šä¼ æˆåŠŸçš„








