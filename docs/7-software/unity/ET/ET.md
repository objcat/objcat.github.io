# üçé ÁÆÄ‰ªã

`ET`ÊòØ`ÁÜäÁå´`Â§ß‰Ω¨ÂºÄÂèëÁöÑ‰∏Ä‰∏™`UnityÂÖ®Ê†àÊ∏∏ÊàèÊ°ÜÊû∂`, ÂÆÉÈááÁî®‰∫Ü`ESC`ÁöÑ`ËÆæËÆ°ÊÄùÊÉ≥`, ÂåÖÂê´`ÂâçÁ´Ø+ÂêéÁ´Ø`, Êàë‰ª¨ÂèØ‰ª•Âú®Ê≠§Âü∫Á°Ä‰∏äÂéªÂºÄÂèëÊàë‰ª¨Ëá™Â∑±ÁöÑÊ∏∏Êàè, Êõ¥‰∏ìÊ≥®‰∏éËÆæËÆ°

https://github.com/egametang/ET

Á´û‰∫â‰∫ßÂìÅÊòØ`GameFramework`

https://github.com/EllanJiang/GameFramework

Êú¨Êñá‰∏ªË¶ÅËÆ≤ET

# üçé Âø´ÈÄüÂºÄÂßã

## üå≤ ‰∏ãËΩΩÂπ∂Ëß£Âéã

Áõ¥Êé•ÂéªÂÆòÁΩë, ÂàáÊç¢ÂàÜÊîØÂà∞`8.1`

![](images2/Pasted%20image%2020250814234248.png)

ÁÑ∂ÂêéÁõ¥Êé•ÊääÈ°πÁõÆ‰∏ãËΩΩ‰∏ãÊù•Â∞±ÂèØ‰ª•‰∫Ü, Ëß£ÂéãÂá∫Êù•Â§ßÊ¶ÇÊòØ`84M`

![](images2/Pasted%20image%2020250814234413.png)

ÂèØ‰ª•ÁúãÂà∞ÈáåÈù¢ÁöÑÁõÆÂΩïÁªìÊûÑÊòØËøôÊ†∑ÁöÑ

![](images2/Pasted%20image%2020250814234804.png)

Êñá‰ª∂ÁöÑÂèòÂåñÊàëËøôÈáåÂª∫‰∫Ü‰∏Ä‰∏™`Git`‰ªìÂ∫ì

https://gitee.com/objcat/test-et81

## üå≤ ÊâìÂºÄÈ°πÁõÆ

Êàë‰ª¨‰ΩøÁî®`Unity Hub`‰∏≠ÁöÑ`Open`ÊâìÂºÄÈáåÈù¢ÁöÑ`Unity`Êñá‰ª∂Â§π, ‰ΩúËÄÖÊé®ËçêÁöÑ`Unity`ÁöÑÁâàÊú¨ÊòØ`2022.3.15`, ÈùûÂøÖË¶Å‰∏çË¶ÅÂéªÁî®Âà´ÁöÑÁâàÊú¨, ÊàëÊòØÊáíÂæó‰∏ãËΩΩ‰∫Ü, Áî®ÁöÑ`2022.3.16` - -

![](images2/Pasted%20image%2020250815002712.png)

ÊàëÁöÑ‰ºöÊèêÁ§∫ÊàëÁâàÊú¨‰∏çÂØπ

![](images2/Pasted%20image%2020250816121006.png)

ÁÑ∂ÂêéÊàëÈÄâÊã©ÁöÑÊòØ`Choose another Editor verison`, ÁÑ∂ÂêéÁÇπÂáª‰∏ãÈù¢ÁöÑ`Open`

![](images2/Pasted%20image%2020250816121048.png)

ÁÑ∂Âêé‰ºöÊúâ‰∏Ä‰∏™‰øÆÊîπ`UnityÁâàÊú¨`ÁöÑÊèêÁ§∫

![](images2/Pasted%20image%2020250816121129.png)

Áõ¥Êé•ÁÇπÂáª`Change verison`, Â¶ÇÊûúÂíå‰ΩúËÄÖ‰ΩøÁî®ÁöÑ‰∏çÊòØÂêå‰∏Ä‰∏™`Unity`ÁâàÊú¨‰∏≠Èó¥‰ºöÊúâÂ§ö‰∏™ÂØπËØùÊ°Ü, Êàë‰ª¨Áõ¥Êé•ÁÇπÂáªÁªßÁª≠Â∞±ÂèØ‰ª•‰∫Ü

![](images2/Pasted%20image%2020250816121252.png)

ÁÇπÂáª`Continue`Â∞±ÂèØ‰ª•‰∫Ü

![](images2/Pasted%20image%2020250815001132.png)

ÂèØ‰ª•ÁúãÂà∞, ÂÆÉÂú®ÂÆâË£ÖÊàë‰ª¨Ê∏∏ÊàèÊâÄÈúÄË¶ÅÁöÑÂ∫ì

![](images2/Pasted%20image%2020250816121327.png)

## üå≤ Ëß£ÂÜ≥ÁÆ°ÁêÜÂëòÊèêÁ§∫

![](images2/Pasted%20image%2020250823120954.png)

ÊúâÊó∂ÂÄôÊâìÂºÄ‰ºöÊèêÁ§∫Ëøô‰∏™Ê°Ü, Êàë‰ª¨ÂèØ‰ª•Áõ¥Êé•ÈÄâÊã©`I wish`, Â¶ÇÊûú‰Ω†Â´åÁÉ¶‰πüÂèØ‰ª•‰øÆÊîπ`win`Á≥ªÁªüÈÖçÁΩÆ

Êàë‰ª¨ÈúÄË¶ÅÂú®Á≥ªÁªüÈÖçÁΩÆ‰∏≠ÂºÄÂêØ‰∏§‰∏™‰∏úË•ø, È¶ñÂÖàÊàë‰ª¨`win+R`ÊâìÂºÄÊéßÂà∂Âè∞ÁïåÈù¢

![](images2/Pasted%20image%2020250823121232.png)

ËæìÂÖ•`secpol.msc`

Âá∫Áé∞`Êú¨Âú∞ÂÆâÂÖ®Á≠ñÁï•`Á™óÂè£, Âú®ÈáåÈù¢ÈÄâÊã©`ÂÆâÂÖ®ÈÄâÈ°π`, ÊääÂõæ‰∏≠Ê†áËÆ∞ÁöÑ‰∏§‰∏™ÈÖçÁΩÆÊîπ‰∏∫`Â∑≤ÂêØÁî®`Âç≥ÂèØ

![](images2/Pasted%20image%2020250823121147.png)

## üå≤ ÊâìÂºÄÈ°πÁõÆ

È°πÁõÆÊâìÂºÄÊòØËøô‰∏™Ê†∑Â≠ê

![](images2/Pasted%20image%2020250816121911.png)

ÂàùÂßãÈ°πÁõÆÊâìÂºÄÊòØËøôÊ†∑ÁöÑ, Âï•‰πüÊ≤°Êúâ, Êàë‰ª¨Êù•Áúã‰∏Ä‰∏ãÊñá‰ª∂ÂèòÂåñ

![](images2/Pasted%20image%2020250816122132.png)

Êàë‰ª¨ÂèØ‰ª•ÁúãÂà∞ÈÉΩÊòØÊúâÂÖ≥È°πÁõÆÁöÑÈÖçÁΩÆ, ËøôÁ±ªÈÖçÁΩÆÊòØ`Unity`Â∏ÆÊàë‰ª¨Ëá™Âä®ÊîπÂä®ÁöÑ

## üå≤ Âä†ËΩΩÂú∫ÊôØ

Êàë‰ª¨È¶ñÂÖàÂèåÂáª`Scenes`‰∏≠ÁöÑ`init`

![](images2/Pasted%20image%2020250815001453.png)

ÊàëÊâìÂºÄÂêéÊòØËøôÊ†∑ÁöÑ, Âà∞ËøôÈáåÊàë‰ª¨Âú∫ÊôØÂ∞±ÁúãÂà∞‰∫Ü

![](images2/Pasted%20image%2020250815002020.png)

## üå≤ ÈÖçÁΩÆUnity

### üå∏ ÈÖçÁΩÆÈªòËÆ§Â∑•ÂÖ∑

ÊâìÂºÄÂ∑•Á®ãÂêé, ÁÇπÂáª`ËèúÂçï‰∏äÁöÑ -> Edit -> Preferences -> External Tools`, ÁÇπÂáª‰∏ãÊãâÊ°Ü`External Script Editor`ÈÄâÊã©`Rider`, `Generate .csproj files for`‰∏≠ÁöÑÈÄâÈ°πÂÖ®ÈÉ®‰∏çË¶ÅÂãæÈÄâ  

![](images2/Pasted%20image%2020250816115413.png)

ÊàëÁöÑ`Generate .csproj files for`‰øùÊåÅ‰∫ÜÈªòËÆ§ÈÖçÁΩÆ

### üå∏ ÈÖçÁΩÆAppType

Âú®`Project`ËßÜÂõæ‰∏≠ÈÄâ‰∏≠`Assets/Resources/GlobalConfig`, Êää`AppType`ÈÄâÊã©Êàê`Demo(Áä∂ÊÄÅÂêåÊ≠•)`ÊàñËÄÖ`LockStep(Â∏ßÂêåÊ≠•)`

![](images2/Pasted%20image%2020250816122319.png)

ÈªòËÆ§ÊòØËøôÊ†∑ÁöÑ, Êàë‰ª¨ÂèØ‰ª•ÁúãÂà∞`App Type`ÈªòËÆ§ÈÄâ‰∏≠ÁöÑÊòØ`Demo`, ÈÇ£Ëøô‰∏™Êàë‰ª¨ÂèØ‰ª•‰∏çÁî®ÊîπÂä®

## üå≤ ÂÆâË£ÖRider

‰∏ÄÁ¨îÂ∏¶Ëøá, Â§™ÁÆÄÂçï‰∫Ü

https://www.jetbrains.com/zh-cn/rider/

![](images2/Pasted%20image%2020250814235146.png)

## üå≤ ÁºñËØëÈ°πÁõÆ

### üå∏ ÁºñËØëUnity

![](images2/Pasted%20image%2020250816122613.png)

Êàë‰ª¨Âú®È°πÁõÆÁ™óÂè£, Á©∫ÁôΩÁöÑÂú∞ÊñπÁÇπÂáªÈº†Ê†áÂè≥ÈîÆ, ÈÄâÊã©`Open C# Project`, ÊâìÂºÄÊòØËøôÊ†∑ÁöÑ

![](images2/Pasted%20image%2020250816122804.png)

ÁÑ∂ÂêéÊàë‰ª¨Á≠âÂæÖÂÆÉÂä†ËΩΩÈ°πÁõÆ

![](images2/Pasted%20image%2020250816122748.png)

![](images2/Pasted%20image%2020250816122821.png)

Ëøô‰∏™Êó∂Èó¥ÊØîËæÉÈïø, ÈúÄË¶ÅËÄêÂøÉÁ≠âÂæÖ, ÁÑ∂ÂêéÁÇπÂáªÂ∞èÈî§Â≠êÁºñËØë‰∏ã

![](images2/Pasted%20image%2020250816122917.png)

Êàë‰ª¨ÂèëÁé∞‰ºöÂá∫Áé∞ÈîôËØØ

```
2>------- Started building project: Unity.Core
D:\ms\Microsoft Visual Studio\2022\Professional\MSBuild\Current\Bin\Roslyn\csc.exe /noconfig /unsafe+ /nowarn:0169,0649,3021,8981,1701,1702,2008 /fullpaths 
...
2>CSC: Error CS0006 : Êú™ËÉΩÊâæÂà∞ÂÖÉÊï∞ÊçÆÊñá‰ª∂‚ÄúD:\project\unity\test-et81\Share\Analyzer\bin\Debug\Share.Analyzer.dll‚Äù
2>------- Finished building project: Unity.Core. Succeeded: False. Errors: 1. Warnings: 0
Build completed in 00:00:01.511
```

Êàë‰ª¨ÂèØ‰ª•ÁúãÂà∞‰∏Ä‰∏™Êú™ËÉΩÊâæÂà∞ÂÖÉÊï∞ÊçÆÊñá‰ª∂ÁöÑÈóÆÈ¢ò

```
D:\project\unity\test-et81\Share\Analyzer\bin\Debug\Share.Analyzer.dll
```

‰∏çË¶ÅÁùÄÊÄ•, Êàë‰ª¨Êù•ÁºñËØë`ET`

### üå∏ ÁºñËØëET

Êàë‰ª¨Âú®Â∑•Á®ãÁõÆÂΩï‰ΩøÁî®`Rider`ÊâìÂºÄ`ET`

![](images2/Pasted%20image%2020250816123156.png)

ÊâìÂºÄÈ°πÁõÆÊòØËøôÊ†∑ÁöÑ

![](images2/Pasted%20image%2020250816123514.png)

Êàë‰ª¨Á≠âÂæÖÂä†ËΩΩ

![](images2/Pasted%20image%2020250816123450.png)

Êàë‰ª¨Áõ¥Êé•ÁÇπÂáªÁºñËØë

![](images2/Pasted%20image%2020250816123609.png)

ÂèØ‰ª•ÁúãÂà∞Êó•ÂøóÊªöÂä®

![](images2/Pasted%20image%2020250816124454.png)

ËøôÈáåÊàëÊòØËÉΩÁºñËØëÊàêÂäüÁöÑ

![](images2/Pasted%20image%2020250816124521.png)

ÁÑ∂ÂêéÊàë‰ª¨ÂÜçÂõûÂ§¥ÁºñËØë`Unity`ÂèëÁé∞ÂèØ‰ª•‰∫Ü

![](images2/Pasted%20image%2020250816124604.png)

ÊâÄ‰ª•Êàë‰ª¨ÂæóÂà∞‰∫ÜÁªìËÆ∫, Áº∫Â∞ë`dll`ÊòØÂõ†‰∏∫Ê≤°ÊúâÁºñËØë`ET`ÂØºËá¥ÁöÑ

Êàë‰ª¨‰πüÂèØ‰ª•‰ΩøÁî®Âè¶Â§ñ‰∏ÄÁßçÊõ¥ÁÆÄÂçïÁöÑÁºñËØë`ET`ÁöÑÊñπÂºè

![](images2/Pasted%20image%2020250816145855.png)

ÁÇπÂáª`Compile`ÊàñËÄÖÊòØ`F6`Âø´Êç∑ÈîÆ

![](images2/Pasted%20image%2020250817003416.png)

‰ΩÜÊòØËøô‰∏™`ÁºñËØëÊó∂Èó¥`ÊÑüËßâË¶ÅÊØîÂú®`Rider`‰∏≠ÁöÑÊó∂Èó¥Èïø, ÁºñËØëÂâçÊòØÁ©∫ÁöÑ

![](images2/Pasted%20image%2020250817003146.png)

ÁºñËØëÂêéÂèëÁé∞Á°ÆÂÆûÈÉΩÂá∫Êù•‰∫Ü

![](images2/Pasted%20image%2020250817003458.png)

`.bytes`ÊòØ‰∏∫‰∫ÜËÆ©`Unity`ËØªÂèñÊõ¥Âä†Êñπ‰æø, ÂèØ‰ª•ÈÄöËøá`TextAsset`ËøõË°åÂä†ËΩΩ, `.pdb`ÊòØË∞ÉËØïÊñá‰ª∂

## üå≤ ËøêË°åÈ°πÁõÆ

![](images2/Pasted%20image%2020250816124818.png)

Êàë‰ª¨ÁÇπÂáª`Unity`ÁöÑËøêË°åÂú∫ÊôØ, ÂèØ‰ª•ÁúãÂà∞Âú∫ÊôØÂèØ‰ª•ËøêË°åËµ∑Êù•

![](images2/Pasted%20image%2020250816125145.png)

Êàë‰ª¨ÂèØ‰ª•Âè≥ÈîÆ`Game`, ËÉΩÂ§üÁúãÂà∞‰∏Ä‰∏™`Maximize`ÂèØ‰ª•ÊääÁ™óÂè£ÊîæÂ§ßÂà∞ÂÖ®Â±è

![](images2/Pasted%20image%2020250816125114.png)

ÁÑ∂ÂêéÊòØËæìÂÖ•ÂØÜÁ†Å

![](images2/Pasted%20image%2020250816125234.png)

Ëøô‰∏™Ê≤°ÊúâÂÅöÈôêÂà∂Èöè‰æøËæìÂÖ•Âç≥ÂèØ, ÁÑ∂ÂêéÁÇπÂáªËøõÂÖ•

![](images2/Pasted%20image%2020250816125252.png)

Êàë‰ª¨ÂèØ‰ª•ÁúãÂà∞ËÉΩËøõÂÖ•Ê∏∏Êàè‰∫Ü

![](images2/Pasted%20image%2020250816125313.png)

ËøôÂ∞±ÊòØ`ET`ÁªôÊàë‰ª¨Êèê‰æõÁöÑ`Demo`, Èº†Ê†áÂè≥ÈîÆÁÇπÂáªÂèØ‰ª•ÁßªÂä®ËßíËâ≤

![](images2/Pasted%20image%2020250816125422.png)

RÊòØÁÉ≠ÈáçËΩΩ, Â¶ÇÊûúÊàë‰ª¨‰øÆÊîπ‰∫Ü`ET`ÁöÑ‰ª£Á†ÅÂèØ‰ª•ÈáçÊñ∞`Build`‰∏ÄÊ¨°`ET`, ÁÑ∂ÂêéÁÇπÂáª`R`ÂèØ‰ª•Áõ¥Êé•ÁÉ≠ÈáçËΩΩ`dll`, ‰πüÂ∞±ÊòØËøô‰∫õ‰∏úË•ø

![](images2/Pasted%20image%2020250816125759.png)

Âú®Â∑•Á®ãÁõÆÂΩïÁúãÂà∞ÁöÑ‰ºö‰∏çÂ§™‰∏ÄÊ†∑, `Unity`ÂèØËÉΩÈöêËóè‰∫ÜÂêéÁºÄ

![](images2/Pasted%20image%2020250816150211.png)

TÊòØÂàáÊç¢Âú∞Âõæ

![](images2/Pasted%20image%2020250816125829.png)

ÊàëËøôÈáåÈ°πÁõÆÂ∞±ËøêË°åÂ•Ω‰∫Ü

## üå≤ Ë∞ÉËØï

### üå∏ Á¨¨‰∫åÁßçËøêË°åÈ°πÁõÆÁöÑÊñπÂºè

Êàë‰ª¨ÂõûÂà∞`Rider`, ÊàëÊåáÁöÑËøô‰∏™`Rider`ÊòØÊâìÂºÄ`Unity`Á´ØÁöÑ, ÂèëÁé∞ÂÆÉÁöÑ‰∏äÈù¢‰πüÊúâÂá†‰∏™ÊåâÈíÆÁ±ª‰ºº`Unity`

![](images2/Pasted%20image%2020250817190534.png)

ËøôÂá†‰∏™ÊåâÈíÆÁöÑÊÑèÊÄùÂíå`Unity`‰∏ÄÊ†∑, ÁªøËâ≤ÁöÑÊåâÈíÆÂ∞±ÊòØËøêË°åÊ∏∏Êàè, ÂæàÊòéÊòæ`Rider`ÁªôÊàë‰ª¨Êèê‰æõ‰∫ÜÂø´Êç∑ÂÖ≥ËÅî

### üå∏ ÊâìÊñ≠ÁÇπ

Êàë‰ª¨ÊÉ≥Ë∞ÉËØïÁ¨¨‰∏ÄÊ≠•Â∞±ÈúÄË¶ÅÊâìÊñ≠ÁÇπ, ÊâìÊñ≠ÁÇπÂëäËØâ‰Ω†ÈúÄË¶ÅÂú®Âì™Èáå‰∏≠Êñ≠, ÊâìÊñ≠ÁÇπÁöÑÊñπÂºèÊòØÈº†Ê†áÂ∑¶ÈîÆÁÇπÂáªÂ∫èÂè∑, ÊØîÂ¶ÇÊàëÂú®`Init`ÂÖ•Âè£‰∏äÊâìÊñ≠ÁÇπ

![](images2/Pasted%20image%2020250817191305.png)

### üå∏ ÂêØÂä®Ë∞ÉËØï

Êñ≠ÁÇπÊâìÂ•Ω‰∫ÜÂ∑≤ÁªèÂÆåÊàê`50%`, ‰∏ãÈù¢Â∞±ÂºÄÂßãËøêË°åÈ°πÁõÆË∞ÉËØï, ÂæÄÂè≥Áúã, Êúâ‰∏Ä‰∏™Â∞èËô´Â≠ê‰∏ÄÊ†∑ÁöÑÂõæÊ†á

![](images2/Pasted%20image%2020250817190922.png)
ÁÇπÂáªÂêé‰ºöËøõÂÖ•Âà∞Ë∞ÉËØïÊ®°Âºè, 

![](images2/Pasted%20image%2020250817190936.png)

ËøôÊó∂ÂÄôÂÜçÁÇπÂáªÁªøËâ≤ÊåâÈíÆ, ËÆ©Ê∏∏ÊàèÈáçÊñ∞ÂêØÂä®Âç≥ÂèØ, Â¶ÇÊûú‰∏çÊòØÈáçÊñ∞ÂêØÂä®ÊúâÂèØËÉΩÊñ≠‰∏çÂà∞, Âõ†‰∏∫Êàë‰ª¨ÊâìÊñ≠ÁÇπÁöÑ‰ΩçÁΩÆÂú®`Init`ÂÖ•Âè£

![](images2/Pasted%20image%2020250817191022.png)

ÁÑ∂ÂêéÁ®ãÂ∫èÂ∞±‰ºöÂÅúÂú®‰Ω†ÊâìÊñ≠ÁÇπÁöÑÂú∞Êñπ, ÁÑ∂ÂêéÊàë‰ª¨ÂèØ‰ª•ÈÄöËøáÈº†Ê†áÊîæÂú®ÂèòÈáè‰∏ä, ÁúãÈáåÈù¢ÁöÑÂ±ûÊÄß

![](images2/Pasted%20image%2020250817191621.png)

Âà∞ËøôÈáåÊñ≠ÁÇπÊïôÁ®ãÂÆåÊàê

# üçé Â∑•Á®ãËÆ≤Ëß£

## üå≤ ÁõÆÂΩïÁªìÊûÑ

Êàë‰ª¨ÂÖàÊÄªËßà‰∏Ä‰∏ãÁõÆÂΩïÁªìÊûÑ, ÂÖ∂‰∏≠`DotNet`Ëøô‰∏™Âå∫ÂüüÊòØ`ÊúçÂä°Á´Ø`, `Share`ÊòØÂ∑•ÂÖ∑Âå∫, `Unity`ÊòØ`Ê∏∏ÊàèÁ´Ø`‰πüÂèØ‰ª•Âè´`ÂÆ¢Êà∑Á´Ø`

![](images2/Pasted%20image%2020250815003251.png)

## üå≤ Unity(ÂÆ¢Êà∑Á´Ø)

### üå∏ ETÁ®ãÂ∫èÂÖ•Âè£

`ET`ÁöÑÁ®ãÂ∫èÂÖ•Âè£Êñá‰ª∂ÊòØËøô‰∏™`Assets/Scripts/Loader/MonoBehaviour/Init.cs`, ÂÆÉÊòØÁªëÂÆöÂú®`Glocal`Âú∫ÊôØ‰∏ãÁöÑ, Êàë‰ª¨ÁÇπÂáªÂú∫ÊôØÂ∞±ËÉΩÂ§üÁúãÂà∞‰∏Ä‰∏™`Init.cs`

![](images2/Pasted%20image%2020250817143529.png)

Êàë‰ª¨ÁÆÄÁï•ÁöÑÁúãÁúãÂÆÉÈÉΩÂÅö‰∫Ü‰ªÄ‰πà

```cs
using System;
using CommandLine;
using UnityEngine;

namespace ET
{
	public class Init: MonoBehaviour
	{
		private void Start()
		{
			this.StartAsync().Coroutine();
		}
		
		private async ETTask StartAsync()
		{
			DontDestroyOnLoad(gameObject);
			
			AppDomain.CurrentDomain.UnhandledException += (sender, e) =>
			{
				Log.Error(e.ExceptionObject.ToString());
			};

			// ÂëΩ‰ª§Ë°åÂèÇÊï∞
			string[] args = "".Split(" ");
			Parser.Default.ParseArguments<Options>(args)
				.WithNotParsed(error => throw new Exception($"ÂëΩ‰ª§Ë°åÊ†ºÂºèÈîôËØØ! {error}"))
				.WithParsed((o)=>World.Instance.AddSingleton(o));
			Options.Instance.StartConfig = $"StartConfig/Localhost";
			
			World.Instance.AddSingleton<Logger>().Log = new UnityLogger();
			ETTask.ExceptionHandler += Log.Error;
			
			World.Instance.AddSingleton<TimeInfo>();
			World.Instance.AddSingleton<FiberManager>();

			await World.Instance.AddSingleton<ResourcesComponent>().CreatePackageAsync("DefaultPackage", true);
			
			CodeLoader codeLoader = World.Instance.AddSingleton<CodeLoader>();
			await codeLoader.DownloadAsync();
			
			codeLoader.Start();
		}

		private void Update()
		{
			TimeInfo.Instance.Update();
			FiberManager.Instance.Update();
		}

		private void LateUpdate()
		{
			FiberManager.Instance.LateUpdate();
		}

		private void OnApplicationQuit()
		{
			World.Instance.Dispose();
		}
	}
}
```

#### üåµ Update

È¶ñÂÖàÊàë‰ª¨ÂèØ‰ª•ÁúãÂà∞Ëøô‰∏™Á±ªÊòØÁªßÊâø‰∫éÊàë‰ª¨ÊúÄÁÜüÊÇâÁöÑ`MonoBehaviour`, Âú®`Update`ÊñπÊ≥ïÈáåË°®Á§∫Êàë‰ª¨ÊØè‰∏ÄÂ∏ßÊõ¥Êñ∞ÁöÑÊó∂ÂÄôÂÅö‰ªÄ‰πà, ÂèØ‰ª•ÁúãÂà∞ÂÆÉÂÅö‰∫Ü‰∏§‰ª∂‰∫ã

```cs
TimeInfo.Instance.Update();
FiberManager.Instance.Update();
```

`TimeInfo`ÊòØ`ET`Ê°ÜÊû∂ÈáåÁöÑÊó∂Èó¥ÁÆ°ÁêÜÂô®, `Update`Áî®‰∫éËÆ∞ÂΩïÊØè‰∏ÄÂ∏ßÁöÑÊó∂Èó¥, Âú®ÈáåÈù¢Â∞±Ë∞ÉÁî®‰∫Ü‰∏Ä‰∏™ÊñπÊ≥ï`ClientNow`, Ëøô‰∏™ÂæàÂ•ΩÁêÜËß£, `DateTime.UtcNow.Ticks`ÊòØÁé∞Âú®ÁöÑÊó∂Èó¥Êà≥, `this.dt1970.Ticks`ÊòØ`1970-01-01 00:00:00`ÁöÑÊó∂Èó¥Êà≥, ‰∏§‰∏™Áõ∏ÂáèÂ∞±ÊòØÂΩìÂâçÁöÑÊó∂Èó¥Êà≥, Ê≥®ÊÑè`DateTime.UtcNow.Ticks`Âπ∂‰∏çÊòØ‰ªé`1970`ÂºÄÂßãÁöÑ, ÊâÄ‰ª•ÈúÄË¶ÅÁõ∏Âáè, ‰ª£Á†ÅÂ¶Ç‰∏ã

```cs
public long ClientNow()
{
	return (DateTime.UtcNow.Ticks - this.dt1970.Ticks) / 10000;
}
```

ÁÑ∂ÂêéËøô‰∏™ÂèòÈáè‰øùÂ≠òÂú®`this.FrameTime = this.ClientNow();`‰∏ãÈù¢

ÁÑ∂ÂêéÊàë‰ª¨Êù•Áúã`FiberManager`, ‰ªñÊúâ‰∏Ä‰∏™Â•ΩÂê¨ÁöÑÂêçÂ≠óÂè´ÂÅö`Á∫§Á®ãÁÆ°ÁêÜÂô®`, `Á∫§Á®ã`Â∞±ÊòØÊØîÁ∫øÁ®ãËøòË¶ÅËΩªÈáèÁöÑÁ∫ßÁöÑÁ∫øÁ®ã, Ëøô‰∏çÁ¶ÅËÆ©ÊàëÊÉ≥Âà∞‰∫Ü`ÂçèÁ®ã`, ÂÆÉÂèØ‰ª•Ë¥üË¥£ÁöÑ‰∏úË•øÊúâ

```cs
FiberAÔºöÊàòÊñóÈÄªËæë

ÈáåÈù¢Ë∑ëÂêÑÁßç SystemÔºöAI„ÄÅÊäÄËÉΩ„ÄÅË°ÄÈáèËÆ°ÁÆó‚Ä¶‚Ä¶

ÂÖ®ÈÉ®Â∞ÅÈó≠Âú®Ëøô‰∏™ Fiber ÂÜÖÔºå‰∏ç‰ºöË¢´Â§ñÈÉ®Á∫øÁ®ãÊâìÊâ∞„ÄÇ

FiberBÔºöËÅäÂ§©ÈÄªËæë

ÈáåÈù¢Ë∑ëËÅäÂ§©Áõ∏ÂÖ≥ÁöÑ SystemÔºöÈ¢ëÈÅìÊ∂àÊÅØ„ÄÅÂ•ΩÂèãÁßÅËÅä‚Ä¶‚Ä¶

ÂíåÊàòÊñó Fiber ÂÆåÂÖ®Áã¨Á´ãÔºå‰∫í‰∏çÂπ≤Êâ∞„ÄÇ

‰∏æ‰∏™‰æãÂ≠êÔºöÂΩìÂÆ¢Êà∑Á´ØÂ≠òÂú®Â§çÊùÇËÆ°ÁÆóÊó∂ÔºåÂèØ‰ª•ÂçïÁã¨ÂàõÂª∫‰∏Ä‰∏™FiberËøõË°å‰∏ìÈó®Â§ÑÁêÜÔºåÊØèÊ¨°ÈÄöËøáActorËøõË°åÊ∂àÊÅØ‰º†ÈÄíÔºåÂÜçÂ∞ÜËÆ°ÁÆóÁªìÊûúÈÄöËøáActorËøîÂõûÂà∞‰∏ªFiberÔºåÊääÊõ¥Â§öÁöÑÊÄßËÉΩÁïôÁªô‰∏ªFiberÁî®‰∫éÊ∏≤Êüì‰ª•ÂèäÁâ©ÁêÜËÆ°ÁÆóÁ≠â„ÄÇ

ETÊ°ÜÊû∂ÁöÑÂÆ¢Êà∑Á´ØÂàùÂßãÊó∂Êúâ‰∏§‰∏™FiberÔºåÂàÜÂà´ÊòØMainÂíåNetClientÔºåÂàÜÂà´Â§ÑÁêÜÊ∏∏Êàè‰∏ªÈÄªËæë‰∏éÁΩëÁªúÈÄªËæë„ÄÇ
ÊâÄ‰ª•‰∏∫‰∫ÜÂÖÖÂàÜÂèëÊå•‰∏ªÊú∫ÊÄßËÉΩÔºåÂèØ‰ª•ÊèêÂâçËßÑÂàíÂ•Ω‰∏ªË¶ÅÂäüËÉΩÁöÑÂàÜÁ±ªÔºå‰ª•‰æø‰∫éÂàõÂª∫ÂØπÂ∫îÁöÑFiber„ÄÇ
‰æãÔºöÊ∏∏Êàè‰∏ªÈÄªËæëÔºàÂåÖÊã¨Ê∏≤ÊüìÂíåÁâ©ÁêÜËÆ°ÁÆóÔºâ„ÄÅÁΩëÁªúÈÄªËæëÔºàË¥üË¥£Ê∂àÊÅØÂàÜÂèëÔºâ„ÄÅÊàòÊñó„ÄÅÁÉ≠Êõ¥Êñ∞ÔºàËæπÁé©Ëæπ‰∏ãÔºâ„ÄÅËµÑÊ∫êÂä†ËΩΩÁ≠âÁ≠â„ÄÇ

... fiberËøòÊúâÂæàÂ§öÁî®ÈÄî ÊàëËøô‰∏ÄÁü•ÂçäËß£Âè™ËÉΩËÆ≤Ëøô‰∫õ
```

ÂºïÁî®Â§ß‰Ω¨ÁöÑ‰∏ÄÂº†Âõæ

http://www.toxicstar.top/index.php/archives/266/

![](images2/Pasted%20image%2020250817154513.png)

#### üåµ Word

Êàë‰ª¨ËøòËÉΩÁúãÂà∞‰∏Ä‰∏™ÂÖ≥ÈîÆÁöÑ‰∏úË•ø`Word`

```cs
World.Instance
```

Ëøô‰∏™‰∏úË•øÊòØ‰∏Ä‰∏™`ÂÖ®Â±ÄÂçï‰æãÁÆ°ÁêÜÂô®`, ÂÆÉ‰πüÊòØ‰∏Ä‰∏™Âçï‰æã, Ê≤°ÈîôÂ∞±ÊòØÂçï‰æãËÆæËÆ°Ê®°Âºè, ÂèØ‰ª•Âú®Êï¥‰∏™Á®ãÂ∫èÁöÑÂ£∞ÊòéÂë®ÊúüÂÜÖÈÉΩÂèØ‰ª•ÂêëÈáåÈù¢Â≠ò‰∏úË•øÊàñËÄÖÊää‰∏úË•øÂèñÂá∫Êù•, Êàë‰ª¨ÂèØ‰ª•ÁúãÂà∞‰∏ãÈù¢Âá†Ë°å‰ª£Á†ÅÂ∞±ÊòØ‰ΩøÁî®`AddSingleton`ÂæÄ`World`‰∏≠ÂéªÊ≥®ÂÜåÁªÑ‰ª∂

```cs
World.Instance.AddSingleton<Logger>().Log = new UnityLogger();
ETTask.ExceptionHandler += Log.Error;
			
World.Instance.AddSingleton<TimeInfo>();
World.Instance.AddSingleton<FiberManager>();
```

Ê≥®ÂÜåÁªÑ‰ª∂ÁöÑÊñπÊ≥ïÊòØ`AddSingleton`

```cs
public T AddSingleton<T>() where T : ASingleton, ISingletonAwake, new()
{
	T singleton = new();
	singleton.Awake();

	AddSingleton(singleton);
	return singleton;
}
```

Êàë‰ª¨ÂèØ‰ª•ÁúãÂà∞, Ê≥®ÂÜåÁöÑÂÖ∑‰ΩìÊ≠•È™§Â∞±ÊòØÈÄöËøá`new()`Êé®Êñ≠Ê≥õÂûãÊù•ÂàõÂª∫ÂØπË±°, ÁÑ∂ÂêéÊù•Ë∞ÉÁî®`Awake`, Ëøô‰∏™`Awake`Êàë‰ª¨Áß∞‰∏∫Ê≥®ÂÜåÊñπÊ≥ï, ÈÇ£‰πàÂÆÉÊòØÊÄé‰πàÁü•ÈÅìÊàë‰ª¨ÁöÑÁªÑ‰ª∂‰∏≠Êúâ`Awake`Ëøô‰∏™ÊñπÊ≥ïÂë¢? Ê≤°ÈîôÂ∞±ÊòØÁªßÊâø, Êàë‰ª¨ÂèØ‰ª•ÁúãÂà∞`public abstract class Singleton<T>: ASingleton where T: Singleton<T>`ÊòØ‰∏™ÊäΩË±°Á±ª

```cs
public class TimeInfo: Singleton<TimeInfo>, ISingletonAwake
{
	public void Awake()
	{
		this.dt1970 = new DateTime(1970, 1, 1, 0, 0, 0, DateTimeKind.Utc);
		this.dt = new DateTime(1970, 1, 1, 0, 0, 0, DateTimeKind.Utc);
		this.FrameTime = this.ClientNow();
	}
	Ê≠§Â§ÑÁúÅÁï•‰∏Ä‰∏áË°å......
}
```

Êàë‰ª¨ÂèØ‰ª•ÁúãÂà∞, ÂÆÉÁªßÊâø‰∫Ü`Singleton`Âπ∂ÂÆûÁé∞‰∫ÜÈáåÈù¢ÁöÑ`Awake`ÊñπÊ≥ï

### üå∏ CodeLoader

Ëøô‰∏™‰∏úË•øÊòØÈáç‰∏≠‰πãÈáç, ÂÆÉÁöÑ‰∏ªË¶ÅÁî®ÈÄîÂíå‰ªñÁöÑÂêçÂ≠ó‰∏ÄÊ†∑, Â∞±ÊòØÂä†ËΩΩ‰ª£Á†ÅÁî®ÁöÑ, ‰∏∫‰∫ÜÂÆûÁé∞ÁÉ≠Êõ¥Êñ∞ËÄåÈááÂèñÁ®ãÂ∫èÂÜÖÂä®ÊÄÅÂä†ËΩΩ`dll`ÁöÑÊñπÂºè

```cs
CodeLoader codeLoader = World.Instance.AddSingleton<CodeLoader>();
await codeLoader.DownloadAsync();			
codeLoader.Start();
```

Êàë‰ª¨È¶ñÂÖàÁúãËøô‰∏âË°å, Á¨¨‰∏ÄË°åÂ∞±ÊòØÂàõÂª∫‰∏Ä‰∏™`‰ª£Á†ÅÂä†ËΩΩÂô®`, ÁÑ∂ÂêéÊòØ`await codeLoader.DownloadAsync();`ËøôÂè•ËØù‰ªéÂ≠óÈù¢ÊÑè‰πâ‰∏äÁúãÊòØ`ÂºÇÊ≠•‰∏ãËΩΩ`, ËØ¥Âà∞‰∏ãËΩΩÊàë‰ª¨ÈÉΩ‰ºöÁ¨¨‰∏ÄÊó∂Èó¥ÊÉ≥Âà∞‰ªéËøúÁ®ãÊúçÂä°Âô®‰∏ãËΩΩ

```cs
public async ETTask DownloadAsync()
{
	if (!Define.IsEditor)
	{
		this.dlls = await ResourcesComponent.Instance.LoadAllAssetsAsync<TextAsset>($"Assets/Bundles/Code/Unity.Model.dll.bytes");
		this.aotDlls = await ResourcesComponent.Instance.LoadAllAssetsAsync<TextAsset>($"Assets/Bundles/AotDlls/mscorlib.dll.bytes");
	}
}
```

‰ΩÜÊòØÊàë‰ª¨ÂèëÁé∞ÂÆÉÊòØÂú®Êú¨Âú∞ÂéªÂä†ËΩΩ‰ª£Á†ÅÁöÑ, Ëøô‰∏ÄÁÇπËøòÊòØÊØîËæÉÂ•áÊÄ™ÁöÑ, Êàë‰ª¨ÂêéÈù¢ÂÜçÁúã, Âä†ËΩΩ`dll`ÊàêÂäüÂêé`this.dlls`Âíå`this.aotDlls`Â∞±ÊòØ‰∏§‰∏™Ë£ÖÊúâ`TextAsset`ÁöÑÂ≠óÂÖ∏, ËÄåÂ≠óÂÖ∏ÁöÑkeyÊòØ`Unity.Model.dll, Unity.Model.pdb, Unity.ModelView.dll, Unity.ModelView.pdb`Ëøô‰∫õ`dll`ÁöÑÂêçÂ≠ó, Ëøô‰∏™`TextAsset`Á±ªÂÆòÊñπÁöÑ‰ªãÁªçÊòØ`Represents a raw text or binary file asset.` ÂÆÉÊòØ‰∏ÄÁßçÂèØ‰ª•Ë¢´`Unity`Âä†ËΩΩÁöÑËµÑÊ∫ê, ÊòØ`dll`Ë¢´Âä†ËΩΩËøõÊù•ÁöÑ‰∫åËøõÂà∂Êï∞ÊçÆ

```cs
public async ETTask<Dictionary<string, T>> LoadAllAssetsAsync<T>(string location) where T : UnityEngine.Object
{
	AllAssetsHandle allAssetsOperationHandle = YooAssets.LoadAllAssetsAsync<T>(location);
	await allAssetsOperationHandle.Task;
	Dictionary<string, T> dictionary = new Dictionary<string, T>();
	foreach (UnityEngine.Object assetObj in allAssetsOperationHandle.AllAssetObjects)
	{
		T t = assetObj as T;
		dictionary.Add(t.name, t);
	}

	allAssetsOperationHandle.Release();
	return dictionary;
}
```

Êàë‰ª¨ÂÜçÊù•Áúã‰∏Ä‰∏ã`codeLoader.Start();`

```cs
public void Start()
{
	if (!Define.IsEditor)
	{
		byte[] modelAssBytes = this.dlls["Unity.Model.dll"].bytes;
		byte[] modelPdbBytes = this.dlls["Unity.Model.pdb"].bytes;
		byte[] modelViewAssBytes = this.dlls["Unity.ModelView.dll"].bytes;
		byte[] modelViewPdbBytes = this.dlls["Unity.ModelView.pdb"].bytes;
		// Â¶ÇÊûúÈúÄË¶ÅÊµãËØïÔºåÂèØÊõøÊç¢Êàê‰∏ãÈù¢Ê≥®ÈáäÁöÑ‰ª£Á†ÅÁõ¥Êé•Âä†ËΩΩAssets/Bundles/Code/Unity.Model.dll.bytesÔºå‰ΩÜÁúüÊ≠£ÊâìÂåÖÊó∂ÂøÖÈ°ª‰ΩøÁî®‰∏äÈù¢ÁöÑ‰ª£Á†Å
		//modelAssBytes = File.ReadAllBytes(Path.Combine(Define.CodeDir, "Unity.Model.dll.bytes"));
		//modelPdbBytes = File.ReadAllBytes(Path.Combine(Define.CodeDir, "Unity.Model.pdb.bytes"));
		//modelViewAssBytes = File.ReadAllBytes(Path.Combine(Define.CodeDir, "Unity.ModelView.dll.bytes"));
		//modelViewPdbBytes = File.ReadAllBytes(Path.Combine(Define.CodeDir, "Unity.ModelView.pdb.bytes"));

		if (Define.EnableIL2CPP)
		{
			foreach (var kv in this.aotDlls)
			{
				TextAsset textAsset = kv.Value;
				RuntimeApi.LoadMetadataForAOTAssembly(textAsset.bytes, HomologousImageMode.SuperSet);
			}
		}
		this.modelAssembly = Assembly.Load(modelAssBytes, modelPdbBytes);
		this.modelViewAssembly = Assembly.Load(modelViewAssBytes, modelViewPdbBytes);
	}
	else
	{
		if (this.enableDll)
		{
			byte[] modelAssBytes = File.ReadAllBytes(Path.Combine(Define.CodeDir, "Unity.Model.dll.bytes"));
			byte[] modelPdbBytes = File.ReadAllBytes(Path.Combine(Define.CodeDir, "Unity.Model.pdb.bytes"));
			byte[] modelViewAssBytes = File.ReadAllBytes(Path.Combine(Define.CodeDir, "Unity.ModelView.dll.bytes"));
			byte[] modelViewPdbBytes = File.ReadAllBytes(Path.Combine(Define.CodeDir, "Unity.ModelView.pdb.bytes"));
			this.modelAssembly = Assembly.Load(modelAssBytes, modelPdbBytes);
			this.modelViewAssembly = Assembly.Load(modelViewAssBytes, modelViewPdbBytes);
		}
		else
		{
			Assembly[] assemblies = AppDomain.CurrentDomain.GetAssemblies();
			foreach (Assembly ass in assemblies)
			{
				string name = ass.GetName().Name;
				if (name == "Unity.Model")
				{
					this.modelAssembly = ass;
				}
				else if (name == "Unity.ModelView")
				{
					this.modelViewAssembly = ass;
				}

				if (this.modelAssembly != null && this.modelViewAssembly != null)
				{
					break;
				}
			}
		}
	}
	
	(Assembly hotfixAssembly, Assembly hotfixViewAssembly) = this.LoadHotfix();

	World.Instance.AddSingleton<CodeTypes, Assembly[]>(new[]
	{
		typeof (World).Assembly, typeof (Init).Assembly, this.modelAssembly, this.modelViewAssembly, hotfixAssembly,
		hotfixViewAssembly
	});

	IStaticMethod start = new StaticMethod(this.modelAssembly, "ET.Entry", "Start");
	start.Run();
}
```

Áé∞Èò∂ÊÆµÊàë‰ª¨Âè™ÂÖ≥Ê≥®‰∏Ä‰∏™Ê†∏ÂøÉ‰ª£Á†Å`Assembly.Load`ÂÆÉÊòØ`C#`Êèê‰æõÁöÑÊñπÊ≥ï, ÂèØ‰ª•Êää`dll`Âä®ÊÄÅÂä†ËΩΩÂà∞ÂÜÖÂ≠ò‰∏≠, ÁÑ∂ÂêéÊàë‰ª¨Â∞±ËÉΩÊñπ‰æøÁöÑ‰ΩøÁî®`dll`‰∏≠ÁöÑ‰ª£Á†Å‰∫Ü

```cs
namespace MyHotfix
{
    public class Hello
    {
        public static void Say() => Console.WriteLine("Hello Hotfix!");
    }
}
```

ÁÑ∂ÂêéÊàë‰ª¨‰ΩøÁî®`cs`ÁöÑÂèçÂ∞ÑÊù•Ë∞ÉÁî®Ëøô‰∏™‰ª£Á†Å

```cs
byte[] dllBytes = File.ReadAllBytes("MyHotfix.dll");
Assembly hotfixAss = Assembly.Load(dllBytes);

// ÂèçÂ∞ÑË∞ÉÁî®
Type helloType = hotfixAss.GetType("MyHotfix.Hello");
MethodInfo say = helloType.GetMethod("Say");
say.Invoke(null, null); // ËæìÂá∫ "Hello Hotfix!"
```

ÊâÄ‰ª•`ET`ÁöÑ`ÁÉ≠Êõ¥Êñ∞ÂéüÁêÜ`Â∞±ÊòØÂä®ÊÄÅÊõøÊç¢Ëøô‰∫õ`dll`, Ëøô‰πüÊòØÂÆÉ‰∏çÂ§™Â•ΩÁêÜËß£ÁöÑÂéüÂõ†

### üå∏ ÁÉ≠Êõ¥Êñ∞

‰∏äÈù¢ÁöÑ‰∏ÄÂùóÊúâ‰∏Ä‰∏™ÁñëÈóÆÂ∞±ÊòØ‰∏∫‰ªÄ‰πàÁÉ≠Êõ¥Êñ∞Ê≤°ÊúâËøúÁ®ã‰∏ãËΩΩ`dll`ËÄåÊòØËØªÂèñÊú¨Âú∞ÁöÑ, Âú®‰∏Ä‰∏™Â§ß‰Ω¨ÁöÑÂ∏ñÂ≠êÈáåÊâæÂà∞‰∫ÜÁ≠îÊ°à, ÊòØÂõ†‰∏∫`ET8.1`Ê†πÊú¨Ê≤°ÂéªÂÅöÁÉ≠Êõ¥Êñ∞

https://toxicstar.top/index.php/archives/281/

### üå∏ ÂèçÁºñËØë

Êàë‰ª¨Êé•‰∏ãÊù•‰ΩøÁî®`dnSpy`Êù•ÂèçÁºñËØëÁîüÊàêÁöÑ`dll`Êù•Áúã‰∏Ä‰∏ãÈáåÈù¢ÁöÑ‰ª£Á†Å

![](images2/Pasted%20image%2020250817085116.png)

Áõ¥Êé•Êää`dll`ÊãñÊãΩÂà∞ÈáåÈù¢Âç≥ÂèØ, Êàë‰ª¨Êù•Áúã‰∏Ä‰∏ã`Model`, ÂèØ‰ª•ÁúãÂà∞ÂèçÁºñËØëËøáÊù•ÁöÑ‰ª£Á†ÅÊñá‰ª∂ÂíåÂ∑•Á®ã‰∏≠ÈÉΩÊòØ‰∏Ä‰∏ÄÂØπÂ∫îÁöÑ

![](images2/Pasted%20image%2020250817085851.png)

ÊâÄ‰ª•`dll`Â∞±ÊòØÊàë‰ª¨ÁºñËØëËøáÁöÑ‰ª£Á†Å, `Unity`ÂèØ‰ª•‰ªéËøúÁ®ãÊãâÂèñÊàë‰ª¨Êõ¥Êñ∞ËøáÁöÑ`dll`Âπ∂ÊõøÊç¢Ëøô‰∫õ, ÁÑ∂ÂêéÈáçÊñ∞ÂêØÂä®Á®ãÂ∫èÂ∞±ÂèØ‰ª•ÂÆûÁé∞ÊõøÊç¢‰ª£Á†ÅÁöÑÈÄªËæë, ‰∏çÁî®ÈáçÊñ∞ÂèëÁâàÊú¨‰∫Ü, ÁúÅÊó∂ÁúÅÂäõ, ‰ΩÜÊòØÂÆûÈôÖ‰∏ä‰∏çÊòØÊâÄÊúâÁöÑËÑöÊú¨ÈÉΩÊîØÊåÅÁÉ≠Êõ¥Êñ∞, ÊØîÂ¶ÇÊåÇÂú®`inspector`‰∏≠ÁöÑ`Monobehaver`ËÑöÊú¨Â∞±‰∏çËÉΩÂä†ÂÖ•ÁÉ≠Êõ¥Êñ∞, ‰ΩÜÊòØÂèØ‰ª•ÈÄöËøáÂ•óÂ£≥ÁöÑÂΩ¢ÂºèÊù•ÂÆûÁé∞ÁÉ≠Êõ¥Êñ∞, ËøôÊòØÊàë‰∫ÜËß£Âà∞ÁöÑ

### üå∏ ÁºñËØëËøáÁ®ã

‰Ω†ÂèØËÉΩÊúâ‰∏Ä‰∏™ÁñëÈóÆ, `dll`ÊòØÂ¶Ç‰ΩïÁºñËØëÂà∞Êàë‰ª¨Â∑•Á®ã‰∏≠ÁöÑ`Code`Êñá‰ª∂Â§πÁöÑ, Ëøô‰∏™Êàë‰ª¨‰ª•ÂêéÂÜçÂéªÁ†îÁ©∂, ‰Ω†Áé∞Âú®ÂèØ‰ª•ËÆ§‰∏∫`ET`ÁªôÊàë‰ª¨Â∞ÅË£Ö‰∫ÜËøôÊ†∑ÁöÑÊµÅÁ®ã, Êàë‰ª¨Áõ¥Êé•Áî®Â∞±Â•Ω‰∫Ü, Ëøô‰∏ÄÁ´†ÊàëÂêéÈù¢‰ºöËØ¶ÁªÜËØ¥

### üå∏ ‰ª£Á†ÅÂàÜÂå∫

Êàë‰ª¨ÂÖàÊù•ÁúãËøô‰∏™Ê®°Âùó, Ê†πÊçÆËßÜÈ¢ëËÆ≤Ëß£, ËøôÊòØ‰ΩúËÄÖÁªôÊàë‰ª¨Ê†πÊçÆÂäüËÉΩÂàÜÂá∫Êù•ÁöÑ‰∏çÂêåÁöÑ`Á®ãÂ∫èÈõÜ`, Âú®ÊàëÁêÜËß£ÂíåJava‰∏≠ÁöÑ`Maven Module`Â∑Æ‰∏çÂ§ö, Â∞±ÊòØÊ†πÊçÆÂàÜÂ∑•Êää‰∏Ä‰∏™È°πÁõÆÊãÜÊàê‰∏ÄÂ†ÜÂ∞èÈ°πÁõÆ

- ‰∏éÂÆö‰πâÁõ∏ÂÖ≥ÁöÑÊîæÂú®`Model`‰∏≠
- ‰∏éÂÆûÁé∞Áõ∏ÂÖ≥ÁöÑÊîæÂú®`Hotfix`‰∏≠
- ‰∏éËßÜÂõæÂÆö‰πâÁõ∏ÂÖ≥ÁöÑÊîæÂú®`ModelView`‰∏≠
- ‰∏éËßÜÂõæÂÆûÁé∞Áõ∏ÂÖ≥ÁöÑÊîæÂú®`HotfixView`‰∏≠

‰∏æ‰∏™‰æãÂ≠ê, Êàë‰ª¨ÊâæÂà∞

![](images2/Pasted%20image%2020250815012037.png)

ÁÑ∂ÂêéÁúã‰∏Ä‰∏ãÂÆÉÁöÑ‰ª£Á†Å

```cs
using UnityEngine;

namespace ET.Client
{
	[ComponentOf(typeof(UI))]
	public class UILoginComponent: Entity, IAwake
	{
		public GameObject account;
		public GameObject password;
		public GameObject loginBtn;
	}
}
```

ÂÆÉÁöÑÂÆûÁé∞Â∞±Âú®`Hotfix`‰∏≠

![](images2/Pasted%20image%2020250815012141.png)

```cs
using UnityEngine;
using UnityEngine.UI;

namespace ET.Client
{
	[EntitySystemOf(typeof(UILoginComponent))]
	[FriendOf(typeof(UILoginComponent))]
	public static partial class UILoginComponentSystem
	{
		[EntitySystem]
		private static void Awake(this UILoginComponent self)
		{
			ReferenceCollector rc = self.GetParent<UI>().GameObject.GetComponent<ReferenceCollector>();
			self.loginBtn = rc.Get<GameObject>("LoginBtn");
			
			self.loginBtn.GetComponent<Button>().onClick.AddListener(()=> { self.OnLogin(); });
			self.account = rc.Get<GameObject>("Account");
			self.password = rc.Get<GameObject>("Password");
		}

		
		public static void OnLogin(this UILoginComponent self)
		{
			LoginHelper.Login(
				self.Root(), 
				self.account.GetComponent<InputField>().text, 
				self.password.GetComponent<InputField>().text).Coroutine();
		}
	}
}
```

‰πüÂ∞±ÊòØËØ¥Êàë‰ª¨ÊØè‰∏Ä‰∏™`Model`ÂÆûÁé∞ÁöÑ‰∏úË•øÈÉΩÂú®`HotFix`‰∏≠ÊòØÊúâ‰∏Ä‰∏ÄÂØπÂ∫îÁöÑÂÆûÁé∞Êñá‰ª∂ÁöÑ, Âπ∂‰∏îËøô‰∏™Êñá‰ª∂ÊòØ`xxxComponentSystem`Êù•ÂëΩÂêçÁöÑ, Ëøô‰∏™Êñá‰ª∂Âú®ÁºñËØëÁöÑÊó∂ÂÄôÂ∞±‰ºöÁºñËØëÂà∞Êàë‰ª¨ÂàöÊâç`CodeLoader`ËØªÂèñ`‰ª£Á†ÅËµÑ‰∫ß`ÁöÑÁõÆÂΩï

### üå∏ Á®ãÂ∫èÈõÜ‰æùËµñ

Á®ãÂ∫èÈõÜ‰πãÈó¥ÊòØÂ≠òÂú®‰æùËµñÂÖ≥Á≥ªÁöÑ, Êàë‰ª¨ÂèØ‰ª•Áúã‰∏Ä‰∏ã, `.asmdef`Â∞±ÊòØËÆ∞ÂΩïÂΩìÂâç`Á®ãÂ∫èÈõÜ`ÁöÑ‰æùËµñÊñá‰ª∂

![](images2/Pasted%20image%2020250815012954.png)

Êàë‰ª¨ÊâìÂºÄÂÆÉ

```json
{
    "name": "Unity.Core",
    "rootNamespace": "ET",
    "references": [
        "Unity.ThirdParty",
        "Unity.Mathematics",
        "MemoryPack"
    ],
    "includePlatforms": [],
    "excludePlatforms": [],
    "allowUnsafeCode": true,
    "overrideReferences": false,
    "precompiledReferences": [],
    "autoReferenced": true,
    "defineConstraints": [],
    "versionDefines": [],
    "noEngineReferences": false
}
```

ÂèØ‰ª•ÁúãÂà∞`Core`‰æùËµñ`Unity.ThirdParty`, Âõ†Ê≠§ÂÆÉÂèØ‰ª•‰ΩøÁî®`Unity.ThirdParty`ÈáåÈù¢ÁöÑ‰ª£Á†Å

## üå≤ DotNet

ÂæÖÂÆåÂñÑ

## üå≤ Tool

ÂæÖÂÆåÂñÑ

# üçé ECS

Ëøô‰∏ÄÁ´†ÈùûÂ∏∏ÁöÑÈáçË¶Å, ËôΩÁÑ∂ÊàëÂú®ÂÜôËøôÁ´†ÁöÑÊó∂ÂÄô‰πüÊòØ‰∏ÄÁü•ÂçäËß£ÁöÑ, ‰ΩÜÊòØÂ¶ÇÊûú‰∏çÂ≠¶‰π†`ECS`ËÆæËÆ°Â∞±Êó†Ê≥ïÊ∑±ÂÖ•ÁêÜËß£ÂÆû‰ΩìÂíåÁªÑ‰ª∂

È¶ñÂÖà`ESC`ÂÖ®Á®ãÊòØ`Entity-Component-System`, ‰πüÂ∞±ÊòØ`ÂÆû‰Ωì-ÁªÑ‰ª∂-Á≥ªÁªü`

## üå≤ Entity

ÂÆÉÊòØ‰∏Ä‰∏™ÂØπË±°, ÊàñËÄÖ‰∏ÄÁ±ªÂØπË±°ÁöÑÊäΩË±°, ÂèØ‰ª•Ë°®Á§∫ÂÖ∑‰ΩìÁöÑÊüê‰∏™ËßíËâ≤, ÊüêÊ£µÊ†ë, Êüê‰∏™ÂÆπÂô®, Êú¨Ë∫´‰∏çÂåÖÂê´ÈÄªËæë, Âè™ÊúâÊàêÂëòÂèòÈáè, ÂèØ‰ª•ÊèèËø∞ÂØπË±°ÁöÑÁâπÂæÅ, ÊØîÂ¶ÇÊàëËÆæËÆ°ÁöÑ`Entity`ÊòØ`Person`, ÈÇ£‰πàÊàëÁöÑÂ±ûÊÄßÂ∞±ÊòØ, `ÂêçÂ≠ó, Âπ¥ÈæÑ, ÊÄßÂà´, Âá∫ÁîüÂπ¥ÊúàÊó•`

## üå≤ Component

ÁªÑ‰ª∂, ÁªÑ‰ª∂ÂèØ‰ª•ÈÄöËøáÊåÇËΩΩÂà∞ÂÆû‰Ωì‰∏äÂéªÂèëÊå•‰ΩúÁî®, ÊØîÂ¶ÇÊàëÊää‰∫∫ÁöÑË∫´‰∏äÊåÇËΩΩ`Â§¥, Ë∫´‰Ωì, ÊâãËáÇ, ËÖø`, ÈÇ£‰πàËøôÂá†‰∏™ÈÉΩÊòØ`Component`, ÁªÑ‰ª∂‰∏ç‰ªÖÂèØ‰ª•Ë°®Âô®ÂÆò, ËÄå‰∏îÂèØ‰ª•Ë°®Ë°å‰∏∫, ÊØîÂ¶Ç`Ë°åËµ∞, Ë∑≥Ë∑É, Ë∑ëÊ≠•`, Ëøô‰∫õ‰πüÊòØÈúÄË¶ÅÈù†ÁªÑ‰ª∂ÂéªÂÆûÁé∞ÁöÑ, Êúâ‰∫∫‰ºöÈóÆ`Ë°åËµ∞`‰∏∫‰ªÄ‰πà‰∏çËÉΩÁõ¥Êé•ÁªëÂÆöÂú®ËÖø‰∏äÂë¢, Êàë‰πüÊõæÁªèÊúâËøô‰∏™ÁñëÈóÆ, GPTÂõûÁ≠îÊàëËØ¥Ë°åËµ∞ÊòØÂÖ®Ë∫´ÁöÑËøêÂä®, ÈúÄË¶ÅÂêÑ‰∏™ÈÉ®‰ΩçÂéªÈÖçÂêà, ËøôÂ∞±ÈúÄË¶Å‰∏Ä‰∏™ÁªÑ‰ª∂ÂéªÊîØÊíë, Â¶ÇÊûúÂè™ÊòØ`‰º∏‰∏™ËÖø`Ëøô‰∏™Âä®‰ΩúÂèØËÉΩ‰∏çÈúÄË¶ÅÂÖ®Ë∫´ÈÖçÂêà, ÊòØÂèØ‰ª•ÂÜôÂú®ËÖøÁöÑ`System`‰∏≠ÁöÑ

## üå≤ System

Êàë‰ª¨Âú®‰∏äÊñáÊèêÂà∞‰∫Ü`Component`, Ëøô‰∏™ÈáåÈù¢‰πüÂè™ËÉΩË°®Á§∫Á∫ØÊï∞ÊçÆ, Â¶ÇÊûúÈúÄË¶ÅÂÆûÁé∞ÈÄªËæëÈúÄË¶ÅÂÜôÂú®ÂØπÂ∫îÁöÑ`system`‰∏≠, ÊØîÂ¶ÇÊàëÂÜôÁöÑÁªÑ‰ª∂ÊòØ`LegComponent`ÈáåÈù¢Êúâ`ËÖøÁöÑÈïøÂ∫¶, ËÖøÁöÑÈ¢úËâ≤`, ÈÇ£‰πàÊàë‰ª¨ÂÆûÁé∞ÈÄªËæëÁöÑ`system`Â∞±Ë¶ÅÂëΩÂêç‰∏∫`LegComponentSystem`

## üå≤ ÊÄªÁªì

`ECS`Âèà‰∏âÈÉ®ÂàÜÁªÑÊàê, ÂÖ∂‰∏≠`Entity`Âíå`Component`ÈÉΩÂè™ËÉΩË°®Á§∫Êï∞ÊçÆ, ‰∏ÄËà¨ÊÉÖÂÜµ‰∏ã, ‰∏Ä‰∏™‰∏ª‰ΩìÊØîÂ¶Ç`‰∫∫`, ÊòØÈúÄË¶ÅÂÆö‰πâÊàê`Entity`ÁöÑ, ËÄå`Â§¥, ÊâãËáÇ, ËÖø`ÊòØË¶ÅÂÆö‰πâÊàê`Component`ÁöÑÂõ†‰∏∫‰ªñ‰ª¨‰∏çËÉΩÂçïÁã¨Â≠òÂú®, ÈúÄË¶ÅÊåÇËΩΩÂà∞`‰∫∫`‰∏ä, ËÄåÂ∏¶ÊúâÈÄªËæëÁöÑÈúÄË¶ÅÂÜôÂú®`System`‰∏≠

# üçé ÂÆû‰Ωì

Âú®‰∏ä‰∏Ä‰∏™Á´†ËäÇÊàë‰ª¨Â∑≤ÁªèÂ≠¶‰π†ËøáECSËÆæËÆ°ÊÄùÊÉ≥‰∫Ü, ÈÇ£‰πàËøô‰∏ÄÁ´†Â∞±ÊòØÂØπÂÆû‰ΩìÁöÑÂÖ∑‰ΩìËÆ≤Ëß£, Âú®`ET`‰∏≠ÂÆû‰Ωì‰πüÊòØÊúâÂàÜÁ±ªÁöÑ

```cs
Entity
 ‚îú‚îÄ‚îÄ Scene
 ‚îÇ    ‚îú‚îÄ‚îÄ Unit (Áé©ÂÆ∂/ÊÄ™Áâ©/NPC)
 ‚îÇ    ‚îÇ     ‚îî‚îÄ‚îÄ Component (ÁßªÂä®/AI/Âä®Áîª/Ë°ÄÊù°...)
 ‚îÇ    ‚îú‚îÄ‚îÄ UI (Á™óÂè£)
 ‚îÇ    ‚îÇ     ‚îî‚îÄ‚îÄ Component (ÊåâÈíÆ/ÊñáÊú¨/ÈÄªËæë...)
 ‚îÇ    ‚îî‚îÄ‚îÄ Room (ÊàøÈó¥)
 ‚îÇ          ‚îú‚îÄ‚îÄ Player (Áé©ÂÆ∂ÈÄªËæë)
 ‚îÇ          ‚îî‚îÄ‚îÄ Player (Áé©ÂÆ∂ÈÄªËæë)
```

## üå≤ Entity

ÂÆû‰ΩìÂü∫Á±ª, ÊâÄÊúâÁöÑÂÆû‰ΩìÂåÖÊã¨ÁªÑ‰ª∂ÈÉΩÊòØÁªßÊâø‰∫éËøô‰∏™

‰ΩçÁΩÆ`Unity/Assets/Scripts/Core/Entity/Entity.cs`

```cs
// abstract ÊäΩË±° partial Â§ö‰∏™ÂêåÂêçÂêàÂπ∂Êàê‰∏Ä‰∏™class
public abstract partial class Entity: DisposeObject, IPool
{
	public long InstanceId { get; protected set; }
	...Ê≠§Â§ÑÁï•Âéª‰∏Ä‰∏áÂ≠ó
}
```

- Êèê‰æõÂîØ‰∏ÄÂÆû‰æã`id` -> InstanceId
- ÂÆûÁé∞ÂØπË±°ÁöÑÈîÄÊØÅÈÄªËæë
- ÂØπË±°Ê±†Êé•Âè£ ‰∏çÁî®ÁöÑÂØπË±°ÊîæÂÖ•ÂØπË±°Ê±†ËÄå‰∏çÊòØÁõ¥Êé•ÈîÄÊØÅ

Êàë‰ª¨Êù•ÁúãÁúãÂÆÉÁöÑÂ∏∏Áî®ÊñπÊ≥ï

- IsComponent Âà§Êñ≠ÊòØÂê¶ÊòØ‰∏Ä‰∏™ÁªÑ‰ª∂ ÊàñËÄÖÊòØ‰∏Ä‰∏™ÂÆû‰Ωì

## üå≤ Scene

Ë°®Á§∫‰∏Ä‰∏™Ê∏∏ÊàèÂú∫ÊôØÊàñÈÄªËæëÁ©∫Èó¥

‰ΩçÁΩÆ`Unity/Assets/Scripts/Core/Entity/Scene.cs`

```cs
public class Scene: Entity, IScene
```

- ÁÆ°ÁêÜÂú∫ÊôØ‰∏≠ÁöÑ`Unit` -> ÊÄ™Áâ©/ËßíËâ≤/Ê†ë/Ëçâ .... 
- Â∏∏Áî®ÁªÑ‰ª∂`UnitComponent`Ë¥üË¥£ÁÆ°ÁêÜUnit

## üå≤ Unit

Ë°®Á§∫Âú∫ÊôØ‰∏≠ÂèØÊìç‰ΩúÂØπË±°ÔºàËßíËâ≤ / ÊÄ™Áâ© / NPCÔºâ

- ÂèØ‰ª•ÊåÇËΩΩÂêÑÁßç ComponentÔºàÁßªÂä®„ÄÅAI„ÄÅÂä®Áîª„ÄÅË°ÄÊù°‚Ä¶Ôºâ
- ÂÖ∑Â§á‰∫§‰∫íÊÄßÔºåÊòØÂú∫ÊôØ‰∏≠ÊúÄÂ∏∏Áî®ÁöÑÂÆû‰Ωì‰πã‰∏Ä

## üå≤ UI

Ë°®Á§∫‰∏Ä‰∏™ UI Á™óÂè£ÊàñÁïåÈù¢

- ÂèØ‰ª•ÊåÇËΩΩ‰∏çÂêå ComponentÔºàÊåâÈíÆÈÄªËæë„ÄÅÊñáÊú¨„ÄÅÂÖ≥Èó≠ÈÄªËæë‚Ä¶Ôºâ

## üå≤ Room

Ë°®Á§∫ ‰∏Ä‰∏™ÈÄªËæëÊàøÈó¥ÔºåÂ∏∏Áî®‰∫éÂ§ö‰∫∫Ê∏∏ÊàèÔºàÂØπÂ±Ä/ÊàòÊñó/ÂâØÊú¨Ôºâ

- ÁÆ°ÁêÜ‰∏Ä‰∏™ÂØπÂ±Ä‰∏≠ÁöÑÊâÄÊúâÁé©ÂÆ∂

## üå≤ Player

Ë°®Á§∫ Áé©ÂÆ∂ÈÄªËæëÂÆû‰ΩìÔºå‰∏ÄËà¨ÊåÇÂú® Room ‰∏ã

- ‰∏çÊòØÂú∫ÊôØ‰∏≠ÁöÑËßíËâ≤Ê®°ÂûãÔºàÈÇ£ÊòØ UnitÔºâÔºåËÄåÊòØÂíåÊúçÂä°Âô®‰∫§‰∫íÁöÑÈÄªËæëÂ±Ç
- ÁÆ°ÁêÜÁé©ÂÆ∂ÁöÑË¥¶Êà∑Êï∞ÊçÆÔºàID„ÄÅÂêçÂ≠ó„ÄÅÂàÜÊï∞„ÄÅËøûÊé•Áä∂ÊÄÅ‚Ä¶Ôºâ

# üçé ÁªÑ‰ª∂

```
Scene (Entity)
 ‚îú‚îÄ‚îÄ CurrentScenesComponent   (ÁÆ°ÁêÜÂ≠êÂú∫ÊôØ)
 ‚îú‚îÄ‚îÄ UnitComponent            (ÁÆ°ÁêÜÊâÄÊúâUnit)
 ‚îú‚îÄ‚îÄ UIComponent              (ÁÆ°ÁêÜÊâÄÊúâUIÁ™óÂè£)
 ‚îú‚îÄ‚îÄ RoomManagerComponent     (ÁÆ°ÁêÜÊâÄÊúâÊàøÈó¥)
 ‚îú‚îÄ‚îÄ PlayerComponent          (ÁÆ°ÁêÜÊâÄÊúâÁé©ÂÆ∂ÈÄªËæë)
```

```
UI (Entity)
 ‚îî‚îÄ‚îÄ UILSRoomComponent  (ÊàøÈó¥ÂàóË°®UIÈÄªËæë)
```

## üå≤ CurrentScenesComponent

ÂæÖÂÆåÂñÑ

## üå≤ UnitComponent

ÂæÖÂÆåÂñÑ

## üå≤ UIComponent

ÂæÖÂÆåÂñÑ

## üå≤ RoomManagerComponent

ÂæÖÂÆåÂñÑ

## üå≤ UILSRoomComponent

ÂæÖÂÆåÂñÑ

## üå≤ PlayerComponent

ÂæÖÂÆåÂñÑ

# üçé ÁîüÂëΩÂë®Êúü

## üå≤ IAwake

ÂæÖÂÆåÂñÑ

## üå≤ IUpdate

ÂæÖÂÆåÂñÑ

## üå≤ ILateUpdate

ÂæÖÂÆåÂñÑ

## üå≤ IDestroy

ÂæÖÂÆåÂñÑ

## üå≤ IScene

ÂæÖÂÆåÂñÑ Fiber SceneType

# üçé ÈÖçË°®

ÈÖçË°®ÁöÑÁî®ÈÄîÁî®‰∏ÄÂè•ËØùÊÄªÁªìÂ∞±ÊòØÈÄöËøáÊï∞ÊçÆËΩΩ‰ΩìÈÖçÁΩÆÈùôÊÄÅÊï∞ÊçÆ, ËΩΩ‰ΩìÂèØ‰ª•ÊòØ`excel, json, csv`Á≠â, ÈÖçÁΩÆÂÆåÊØïÂêéÈÄöËøáÁîüÊàêÂ∑•ÂÖ∑ÁîüÊàê‰ª£Á†Å, ÂèØ‰ª•Âú®Ê∏∏Êàè‰∏≠Áõ¥Êé•‰ΩøÁî®Ëøô‰∫õÊï∞ÊçÆ, ËøôÂØπÊàëÊù•ËØ¥ÊòØ‰∏Ä‰∏™Êñ∞È≤úÁöÑ‰∏úË•ø, Âú®ÂâçÂêéÂè∞ÂºÄÂèë10Âπ¥ÊàëÈÉΩÊ≤°ÊúâÂê¨ËØ¥ËøáÈÖçË°®Ëøô‰∏™‰∏úË•ø

## üå≤ ÈÖçË°®ÁõÆÂΩï

È¶ñÂÖàÊàë‰ª¨Ë¶ÅÊâìÂºÄ`ET`ÁöÑÈÖçË°®ÁõÆÂΩï

![](images2/Pasted%20image%2020250823133508.png)

## üå≤ ÈÖçË°®ËßÑÂàô

![](images2/Pasted%20image%2020250823134329.png)

- ‰∏âË°å‰∏âÂàóÂºÄÂßãÈÖçË°®, ‰πüÂ∞±ÊòØÁ¨¨‰∏Ä‰∏™Â≠óÊÆµ‰ªé`C3`ÂºÄÂßã
- „ÄåÊ†áËÆ∞1„ÄçÊâÄÂú®Ë°åÊòØÂ≠óÊÆµÁöÑ‰∏≠ÊñáËØ¥Êòé
- „ÄåÊ†áËÆ∞2„ÄçÊ†áËÆ∞Ë°åÊòØÂ≠óÊÆµÁöÑÂÆûÈôÖ‰ΩøÁî®ÂêçÁß∞, ÁîüÊàê‰ª£Á†ÅÁöÑÊó∂ÂÄôÂèØ‰ª•ÁúãÂà∞
- „ÄåÊ†áËÆ∞3„ÄçÊòØÊï∞ÊçÆÁ±ªÂûã, ÁîüÊàê‰ª£Á†ÅÁöÑÊó∂ÂÄôÂèØ‰ª•ÁúãÂà∞
- „ÄåÊ†áËÆ∞4Âíå6„Äç‰∏∫Ê≥®Èáä, ‰ΩøÁî®`#`, Ê†áËÆ∞‰∏ÄÂàóÂ∞±ÊòØÊ≥®Èáä‰∏ÄÂàó, Ê†áËÆ∞‰∏ÄË°åÂ∞±ÊòØÊ≥®Èáä‰∏ÄË°å, ÊàëÁî®Èîô‰∫ÜÂÜôÁöÑÊ±âÂ≠ó
- „ÄåÊ†áËÆ∞5„ÄçÊ†áËÆ∞`s`ÁöÑÊï∞ÊçÆÂè™ÁªôÊúçÂä°Á´Ø‰ΩøÁî®, Ê†áËÆ∞`c`ÁöÑÊï∞ÊçÆÂè™ÁªôÂÆ¢Êà∑Á´Ø‰ΩøÁî®

## üå≤ ÁîüÊàê‰ª£Á†Å

Êàë‰ª¨Â∞±Áî®Ëá™Â∏¶ÁöÑÊï∞ÊçÆÊù•ÊµãËØï, Êé•‰∏ãÊù•Êàë‰ª¨ÈúÄË¶Å‰ΩøÁî®`ET`Êèê‰æõÁöÑ‰ª£Á†ÅÁîüÊàêÂ∑•ÂÖ∑Êù•ÁîüÊàêÂèØ‰ª•Áõ¥Êé•‰ΩøÁî®Êï∞ÊçÆÁöÑ`Á±ª`

![](images/Pasted%20image%2020250824175609.png)

Êàë‰ª¨ÁÇπÂáªETÊ†èÁõÆ‰∏≠ÁöÑ`Build Tool`

![](images2/Pasted%20image%2020250823135659.png)

![](images2/Pasted%20image%2020250823135713.png)

ÁÑ∂ÂêéÊàë‰ª¨ÊâæÂà∞ÁõÆÂΩï`Assets -> Model -> Generate -> ClientServer -> Config`

![](images2/Pasted%20image%2020250823140057.png)

ÁÑ∂ÂêéÊàë‰ª¨Êù•ÁúãÁúãÂÆÉÁªôÊàë‰ª¨ÁîüÊàêÁöÑ‰ª£Á†Å

```cs
namespace ET
{
    [Config]
    public partial class UnitConfigCategory : Singleton<UnitConfigCategory>, IMerge
    {
        [BsonElement]
        [BsonDictionaryOptions(DictionaryRepresentation.ArrayOfArrays)]
        private Dictionary<int, UnitConfig> dict = new();
		
        public void Merge(object o)
        {
            UnitConfigCategory s = o as UnitConfigCategory;
            foreach (var kv in s.dict)
            {
                this.dict.Add(kv.Key, kv.Value);
            }
        }
		
        public UnitConfig Get(int id)
        {
            this.dict.TryGetValue(id, out UnitConfig item);

            if (item == null)
            {
                throw new Exception($"ÈÖçÁΩÆÊâæ‰∏çÂà∞ÔºåÈÖçÁΩÆË°®Âêç: {nameof (UnitConfig)}ÔºåÈÖçÁΩÆid: {id}");
            }

            return item;
        }
		
        public bool Contain(int id)
        {
            return this.dict.ContainsKey(id);
        }

        public Dictionary<int, UnitConfig> GetAll()
        {
            return this.dict;
        }

        public UnitConfig GetOne()
        {
            if (this.dict == null || this.dict.Count <= 0)
            {
                return null;
            }
            
            var enumerator = this.dict.Values.GetEnumerator();
            enumerator.MoveNext();
            return enumerator.Current; 
        }
    }

	public partial class UnitConfig: ProtoObject, IConfig
	{
		/// <summary>Id</summary>
		public int Id { get; set; }
		/// <summary>Type</summary>
		public int Type { get; set; }
		/// <summary>ÂêçÂ≠ó</summary>
		public string Name { get; set; }
		/// <summary>‰ΩçÁΩÆ</summary>
		public int Position { get; set; }
		/// <summary>Ë∫´È´ò</summary>
		public int Height { get; set; }

	}
}
```

Êàë‰ª¨ÂèØ‰ª•ÁúãÂà∞Ëøô‰∏™‰ª£Á†Å‰∏≠ÊúâÂêåÂêçÁöÑÊñá‰ª∂`UnitConfig`, Ëøô‰∏™Â∞±ÊòØÊàë‰ª¨Êï∞ÊçÆÁöÑÂ≠óÊÆµ‰∫Ü, ËøòÊúâ‰∏Ä‰∏™‰∏úË•ø`UnitConfigCategory`, Ëøô‰∏™Â∞±ÊòØÊàë‰ª¨‰ΩøÁî®Êï∞ÊçÆÁöÑÊó∂ÂÄôÁî®ÁöÑÁ±ª, ÂèØ‰ª•ÁúãÂà∞ÂÆÉÈáåÈù¢ÊúâÂæàÂ§öÁöÑÊñπÊ≥ï, ÊØîÂ¶ÇGet, GetAll, Êàë‰ª¨‰πãÂêé‰ºöÂ≠¶‰π†

## üå≤ Âú®Âì™‰ΩøÁî®

ËøôÊòØ‰∏Ä‰∏™Â•ΩÈóÆÈ¢ò, Âõ†‰∏∫ÊàëÂ∞ùËØïËøáÂú®`Unity\Assets\Scripts\Loader\MonoBehaviour\Init.cs`ËÑöÊú¨‰∏≠ÊâìÂç∞

![](images/Pasted%20image%2020250824002035.png)

ÂèëÁé∞Ê†πÊú¨Ë°å‰∏çÈÄö, ÊèêÁ§∫ÁöÑÊòØÊâæ‰∏çÂà∞Ëøô‰∏™Á±ª, ÂêéÊù•ÁªèËøáË∞ÉÁ†îÊòØÂõ†‰∏∫`ET`ÊòØÂàÜÂ±ÇÁöÑ, Êàë‰ª¨ÁîüÊàêÁöÑ‰ª£Á†ÅÂú®`Unity.Loader`Á®ãÂ∫èÈõÜÂíå`Unity.Model`ËÆøÈóÆ‰∏çÈÄö, ‰∏∫Ê≠§ÊàëÂ∞ùËØï‰∫ÜÊää‰æùËµñÂä†‰∏ä

```json
D:\project\unity\test-et81\Unity\Assets\Scripts\Loader\Unity.Loader.asmdef

"references": [
    "Unity.ThirdParty",
    "Unity.Core",
    "HybridCLR.Runtime",
    "Unity.Model",
    "MemoryPack",
    "YooAsset",
    "YooAsset.Editor"
],
```

Âä†‰∏ä‰πãÂêéÊàëÂÖàÁ±ªÊòØÂèØ‰ª•ËÆøÈóÆ‰∫Ü, ‰ΩÜÊòØËÆøÈóÆÁöÑÊó∂ÂÄôÊä•Èîô

![](images/Pasted%20image%2020250824002445.png)

```
FileNotFoundException: Could not load file or assembly 'Unity.Model, Version=0.0.0.0, Culture=neutral, PublicKeyToken=null' or one of its dependencies.

NullReferenceException: Object reference not set to an instance of an object
ET.Init.Update () (at Assets/Scripts/Loader/MonoBehaviour/Init.cs:48)

NullReferenceException: Object reference not set to an instance of an object
ET.Init.LateUpdate () (at Assets/Scripts/Loader/MonoBehaviour/Init.cs:54)
```

ÂêéÊù•ÁªèËøáÁ†îÁ©∂ÂèëÁé∞ÊòØËøôÊ†∑ÁöÑ, Âõ†‰∏∫Êàë‰ª¨Ë∞ÉÁî®‰ª£Á†ÅÁöÑÊó∂ÂÄô, Ê∏∏ÊàèËøòÊ≤°ÊúâÊääÊï∞ÊçÆÂä†ËΩΩÂà∞Â≠óÂÖ∏Á±ª‰∏≠, ÊâÄ‰ª•ÂØºËá¥‰∫ÜËøô‰∏™ÈóÆÈ¢ò, Êó¢ÁÑ∂ÈóÆÈ¢òÁü•ÈÅì‰∫Ü, ÈÇ£Êàë‰ª¨Â¶Ç‰ΩïËß£ÂÜ≥Âë¢, ÂÖ∂ÂÆûËÄÅÊâã‰∏Ä‰∏ãÂ∞±Ëß£ÂÜ≥‰∫Ü, Êàë‰ª¨ÂèØ‰ª•ÊîæÂà∞`Update`‰∏≠ËøõË°åÊµãËØï, Âõ†‰∏∫ÊØè‰∏ÄÂ∏ßÈÉΩ‰ºöË∞ÉÁî®‰∏Ä‰∏™`Update`, Âπ∂‰∏îÂä†‰∏ä`if`Âà§Êñ≠Âç≥ÂèØ

```cs
if (UnitConfigCategory.Instance != null)
{
	Debug.Log("ÊàëÂú®ËøôÈáå");
	var a = UnitConfigCategory.Instance.Get(1001);
	Debug.Log(a);
}
else
{
	Debug.Log("Á©∫Á©∫Â¶Ç‰πü");
}
```

ÂèØ‰ª•ÁúãÂà∞Êï∞ÊçÆÊòØÂèØ‰ª•ÊâìÂç∞Âá∫Êù•ÁöÑ

![](images/Pasted%20image%2020250824173915.png)

Ë¶ÅËÆ∞‰Ωè‰ΩøÁî®`Debug.Log`‰∏çË¶Å‰ΩøÁî®`cw`Âê¶ÂàôÊâìÂç∞‰∏çÂá∫Êù•, ËôΩÁÑ∂Êàë‰ª¨ÂÅöÂá∫Êù•‰∫Ü, ‰ΩÜÊòØ‰∏çÂª∫ËÆÆÂú®`Init`ÊñπÊ≥ï‰∏≠Êù•Â≠¶‰π†, Êàë‰ª¨ÂèØ‰ª•Êîæ‰∏Ä‰∏™Á©∫ÂØπË±°Âú®ËßÜÂõæ‰∏ä, ÁÑ∂ÂêéÂú®‰∏ªÁõÆÂΩïÊåÇËΩΩ‰∏Ä‰∏™ËÑöÊú¨‰∏äÂéª, ËøôÊ†∑‰∏çÁî®ÈÖçÁΩÆÂüü‰πüÊòØÂèØ‰ª•ËÆøÈóÆÁöÑ

### üå∏ Êñ∞Âª∫Á©∫ÂØπË±°ÂíåËÑöÊú¨

![](images/Pasted%20image%2020250824174057.png)

ÁÑ∂ÂêéÊää‰∏äÈù¢ÂÅöÁöÑ‰æùËµñÁªôËøòÂéüÂõûÊù•, ÊµãËØï‰ª£Á†ÅÂà†Èô§ÊéâÂ∞±Ë°å‰∫Ü

```json
D:\project\unity\test-et81\Unity\Assets\Scripts\Loader\Unity.Loader.asmdef

"references": [
    "Unity.ThirdParty",
    "Unity.Core",
    "HybridCLR.Runtime",
    "MemoryPack",
    "YooAsset",
    "YooAsset.Editor"
],
```

## üå≤ ‰ΩøÁî®ÊñπÊ≥ï

ÁªèËøá‰∏äÈù¢ÁöÑÂ≠¶‰π†, Êàë‰ª¨Â∑≤ÁªèÁü•ÈÅìÂèØ‰ª•Âú®Âì™ÈáåÊµãËØïÈÖçË°®ÁöÑÊï∞ÊçÆ‰∫Ü, Êàë‰ª¨Â∞±ÂºÄÂßãÂ≠¶‰π†

![](images/Pasted%20image%2020250824175609.png)

### üå∏ Get

Âú®‰∏äÈù¢Êàë‰ª¨Â∑≤Áªè‰ΩøÁî®Ëøá‰∫Ü, Ëøô‰∏™Â∞±ÊòØÈÄöËøáidÂéªÊâæ‰∏ÄÊù°Êï∞ÊçÆ

```cs
if (UnitConfigCategory.Instance != null)
{
	Debug.Log("ÊàëÂú®ËøôÈáå");
	var a = UnitConfigCategory.Instance.Get(1001);
	Debug.Log(a);
}
else
{
	Debug.Log("Á©∫Á©∫Â¶Ç‰πü");
}
```

```
"{ \"_t\" : \"UnitConfig\", \"_id\" : 1001, \"Type\" : 1, \"Name\" : \"Á±≥ÂÖãÂ∞î\", \"Position\" : 1, \"Height\" : 178, \"Weight\" : 68 }"
```

Êàë‰ª¨ÂèëÁé∞ÁúãÁöÑÈùûÂ∏∏‰∏çÊ∏ÖÊô∞, Âõ†‰∏∫ÊúâËΩ¨‰πâÁ¨¶

https://learn.microsoft.com/zh-cn/visualstudio/debugger/string-visualizer-dialog-box?view=vs-2022

ÂêéÊù•Â∞ùËØï‰∫Ü, ÂèëÁé∞ËøòÊòØ‰∏çË°å, `JsonUtility`ÊòØÂÆòÊñπÁöÑÂ∫ì, ÊàëÊääÂØπË±°ËΩ¨ÂåñÊàê`json`ÊâìÂç∞, ÁªìÊûúÊòØ`{}`, ËØ¥ÊòéÂπ∂Ê≤°ÊúâËΩ¨Êç¢ÊàêÂäü

```cs
void Update()
{
    if (UnitConfigCategory.Instance != null)
    {
        Debug.Log("ÊàëÂú®ËøôÈáå");
        var a = JsonUtility.ToJson(UnitConfigCategory.Instance.Get(1001), true);
        Debug.Log(a);
    } else
    {
        Debug.Log("Á©∫Á©∫Â¶Ç‰πü");
    }
}
```

`json`ËΩ¨Êç¢‰∏çÁ†îÁ©∂‰∫Ü, ÊúâÁÇπÂøÉÁ¥Ø, ÂÖàÊääÊñáÊ°£ÂÅöÂá∫Êù•

### üå∏ GetAll

Ëé∑ÂèñÊâÄÊúâÁöÑÂëó


# üçé ÁºñËØëÂéüÁêÜ

Â≠¶‰π†ÂÆåËøô‰∏ÄÁ´†ÊàëÊúâ‰∫ÜÊõ¥Ê∑±ÂàªÁöÑËÆ§ËØÜ, ÊàëÊé®Ëçê‰∏çÁü•ÈÅìÁöÑÂèØ‰ª•ÁÇπËøõÊù•Áúã‰∏Ä‰∏ã

[ÁºñËØëÂéüÁêÜ](../ÁºñËØëÂéüÁêÜ/ÁºñËØëÂéüÁêÜ.md)

# üçé FAQ

## üå≤ UnityÈ°πÁõÆÂ¥©Ê∫ÉÂêéË∞ÉËØïÊÖ¢

Ëøô‰∏™ÊòØÊ≠£Â∏∏ÁöÑ, È°πÁõÆÂ¥©Ê∫ÉÂêéÂÆÉÂèØËÉΩ‰ºöÊ∏ÖÈô§ÊéâÊâÄÊúâÁöÑ`dll`ÈáçÊñ∞ËøõË°åÁºñËØë, ÊâÄ‰ª•ÂêØÂä®Êó∂‰ºöÈùûÂ∏∏ÊÖ¢

![](images2/Pasted%20image%2020250817190134.png)

# üçé ÂèÇËÄÉËµÑÊñô

ÊàëËøôÈáåÈÄâÊã©‰∫ÜET`8.1`, ÂèÇËÄÉËßÜÈ¢ëÂ¶Ç‰∏ã

## üå≤ ËßÜÈ¢ë

- ÂíåvËØ∫
https://www.bilibili.com/video/BV1Ls421A7mS

- ‰∏ä‰∏äÁ≠æUpUpDraw
https://www.bilibili.com/video/BV1rhYyeKExP

- Â≠óÊØçÂì•ET 6.0ÊïôÁ®ã
https://www.bilibili.com/video/BV1xK4y1E76q

- ÁÉüÈõ®Ëø∑Á¶ªÂçä‰∏ñÊÆá
https://www.bilibili.com/video/BV1BJ411H7oZ

## üå≤ ÊñáÁ´†

- Ëç∑ÂÖ∞Áå™Â∞èÁÅ∞ÁÅ∞
https://blog.csdn.net/m0_48781656/article/details/123483915?utm_source=chatgpt.com

- ÂÆòÊñπÁ§æÂå∫
https://et-framework.cn/t/Course?utm_source=chatgpt.com

- „ÄêETÊ°ÜÊû∂„ÄëÂü∫Á°ÄÂèäÂÆûË∑µÈöæÈ¢òËß£Á≠î - Âπ∏ËøêÊ∑¶Ê∑¶
https://blog.csdn.net/u014685437/article/details/132273445

- Â∞èÂºüÁöÑETÁ¨îËÆ∞
https://www.yuque.com/et-xd/docs

