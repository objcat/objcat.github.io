# ğŸ ç®€ä»‹

`ET`æ˜¯`ç†ŠçŒ«`å¤§ä½¬å¼€å‘çš„ä¸€ä¸ª`Unityå…¨æ ˆæ¸¸æˆæ¡†æ¶`, å®ƒé‡‡ç”¨äº†`ESC`çš„`è®¾è®¡æ€æƒ³`, åŒ…å«`å‰ç«¯+åç«¯`, æˆ‘ä»¬å¯ä»¥åœ¨æ­¤åŸºç¡€ä¸Šå»å¼€å‘æˆ‘ä»¬è‡ªå·±çš„æ¸¸æˆ, æ›´ä¸“æ³¨ä¸è®¾è®¡

https://github.com/egametang/ET

ç«äº‰äº§å“æ˜¯`GameFramework`

https://github.com/EllanJiang/GameFramework

æœ¬æ–‡ä¸»è¦è®²ET

# ğŸ å¿«é€Ÿå¼€å§‹

## ğŸŒ² ä¸‹è½½å¹¶è§£å‹

ç›´æ¥å»å®˜ç½‘, åˆ‡æ¢åˆ†æ”¯åˆ°`8.1`

![](images2/Pasted%20image%2020250814234248.png)

ç„¶åç›´æ¥æŠŠé¡¹ç›®ä¸‹è½½ä¸‹æ¥å°±å¯ä»¥äº†, è§£å‹å‡ºæ¥å¤§æ¦‚æ˜¯`84M`

![](images2/Pasted%20image%2020250814234413.png)

å¯ä»¥çœ‹åˆ°é‡Œé¢çš„ç›®å½•ç»“æ„æ˜¯è¿™æ ·çš„

![](images2/Pasted%20image%2020250814234804.png)

æ–‡ä»¶çš„å˜åŒ–æˆ‘è¿™é‡Œå»ºäº†ä¸€ä¸ª`Git`ä»“åº“

https://gitee.com/objcat/test-et81

## ğŸŒ² æ‰“å¼€é¡¹ç›®

æˆ‘ä»¬ä½¿ç”¨`Unity Hub`ä¸­çš„`Open`æ‰“å¼€é‡Œé¢çš„`Unity`æ–‡ä»¶å¤¹, ä½œè€…æ¨èçš„`Unity`çš„ç‰ˆæœ¬æ˜¯`2022.3.15`, éå¿…è¦ä¸è¦å»ç”¨åˆ«çš„ç‰ˆæœ¬, æˆ‘æ˜¯æ‡’å¾—ä¸‹è½½äº†, ç”¨çš„`2022.3.16` - -

![](images2/Pasted%20image%2020250815002712.png)

æˆ‘çš„ä¼šæç¤ºæˆ‘ç‰ˆæœ¬ä¸å¯¹

![](images2/Pasted%20image%2020250816121006.png)

ç„¶åæˆ‘é€‰æ‹©çš„æ˜¯`Choose another Editor verison`, ç„¶åç‚¹å‡»ä¸‹é¢çš„`Open`

![](images2/Pasted%20image%2020250816121048.png)

ç„¶åä¼šæœ‰ä¸€ä¸ªä¿®æ”¹`Unityç‰ˆæœ¬`çš„æç¤º

![](images2/Pasted%20image%2020250816121129.png)

ç›´æ¥ç‚¹å‡»`Change verison`, å¦‚æœå’Œä½œè€…ä½¿ç”¨çš„ä¸æ˜¯åŒä¸€ä¸ª`Unity`ç‰ˆæœ¬ä¸­é—´ä¼šæœ‰å¤šä¸ªå¯¹è¯æ¡†, æˆ‘ä»¬ç›´æ¥ç‚¹å‡»ç»§ç»­å°±å¯ä»¥äº†

![](images2/Pasted%20image%2020250816121252.png)

ç‚¹å‡»`Continue`å°±å¯ä»¥äº†

![](images2/Pasted%20image%2020250815001132.png)

å¯ä»¥çœ‹åˆ°, å®ƒåœ¨å®‰è£…æˆ‘ä»¬æ¸¸æˆæ‰€éœ€è¦çš„åº“

![](images2/Pasted%20image%2020250816121327.png)

## ğŸŒ² è§£å†³ç®¡ç†å‘˜æç¤º

![](images2/Pasted%20image%2020250823120954.png)

æœ‰æ—¶å€™æ‰“å¼€ä¼šæç¤ºè¿™ä¸ªæ¡†, æˆ‘ä»¬å¯ä»¥ç›´æ¥é€‰æ‹©`I wish`, å¦‚æœä½ å«Œçƒ¦ä¹Ÿå¯ä»¥ä¿®æ”¹`win`ç³»ç»Ÿé…ç½®

æˆ‘ä»¬éœ€è¦åœ¨ç³»ç»Ÿé…ç½®ä¸­å¼€å¯ä¸¤ä¸ªä¸œè¥¿, é¦–å…ˆæˆ‘ä»¬`win+R`æ‰“å¼€æ§åˆ¶å°ç•Œé¢

![](images2/Pasted%20image%2020250823121232.png)

è¾“å…¥`secpol.msc`

å‡ºç°`æœ¬åœ°å®‰å…¨ç­–ç•¥`çª—å£, åœ¨é‡Œé¢é€‰æ‹©`å®‰å…¨é€‰é¡¹`, æŠŠå›¾ä¸­æ ‡è®°çš„ä¸¤ä¸ªé…ç½®æ”¹ä¸º`å·²å¯ç”¨`å³å¯

![](images2/Pasted%20image%2020250823121147.png)

## ğŸŒ² æ‰“å¼€é¡¹ç›®

é¡¹ç›®æ‰“å¼€æ˜¯è¿™ä¸ªæ ·å­

![](images2/Pasted%20image%2020250816121911.png)

åˆå§‹é¡¹ç›®æ‰“å¼€æ˜¯è¿™æ ·çš„, å•¥ä¹Ÿæ²¡æœ‰, æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹æ–‡ä»¶å˜åŒ–

![](images2/Pasted%20image%2020250816122132.png)

æˆ‘ä»¬å¯ä»¥çœ‹åˆ°éƒ½æ˜¯æœ‰å…³é¡¹ç›®çš„é…ç½®, è¿™ç±»é…ç½®æ˜¯`Unity`å¸®æˆ‘ä»¬è‡ªåŠ¨æ”¹åŠ¨çš„

## ğŸŒ² åŠ è½½åœºæ™¯

æˆ‘ä»¬é¦–å…ˆåŒå‡»`Scenes`ä¸­çš„`init`

![](images2/Pasted%20image%2020250815001453.png)

æˆ‘æ‰“å¼€åæ˜¯è¿™æ ·çš„, åˆ°è¿™é‡Œæˆ‘ä»¬åœºæ™¯å°±çœ‹åˆ°äº†

![](images2/Pasted%20image%2020250815002020.png)

## ğŸŒ² é…ç½®Unity

### ğŸŒ¸ é…ç½®é»˜è®¤å·¥å…·

æ‰“å¼€å·¥ç¨‹å, ç‚¹å‡»`èœå•ä¸Šçš„ -> Edit -> Preferences -> External Tools`, ç‚¹å‡»ä¸‹æ‹‰æ¡†`External Script Editor`é€‰æ‹©`Rider`, `Generate .csproj files for`ä¸­çš„é€‰é¡¹å…¨éƒ¨ä¸è¦å‹¾é€‰  

![](images2/Pasted%20image%2020250816115413.png)

æˆ‘çš„`Generate .csproj files for`ä¿æŒäº†é»˜è®¤é…ç½®

### ğŸŒ¸ é…ç½®AppType

åœ¨`Project`è§†å›¾ä¸­é€‰ä¸­`Assets/Resources/GlobalConfig`, æŠŠ`AppType`é€‰æ‹©æˆ`Demo(çŠ¶æ€åŒæ­¥)`æˆ–è€…`LockStep(å¸§åŒæ­¥)`

![](images2/Pasted%20image%2020250816122319.png)

é»˜è®¤æ˜¯è¿™æ ·çš„, æˆ‘ä»¬å¯ä»¥çœ‹åˆ°`App Type`é»˜è®¤é€‰ä¸­çš„æ˜¯`Demo`, é‚£è¿™ä¸ªæˆ‘ä»¬å¯ä»¥ä¸ç”¨æ”¹åŠ¨

## ğŸŒ² å®‰è£…Rider

ä¸€ç¬”å¸¦è¿‡, å¤ªç®€å•äº†

https://www.jetbrains.com/zh-cn/rider/

![](images2/Pasted%20image%2020250814235146.png)

## ğŸŒ² ç¼–è¯‘é¡¹ç›®

### ğŸŒ¸ ç¼–è¯‘Unity

![](images2/Pasted%20image%2020250816122613.png)

æˆ‘ä»¬åœ¨é¡¹ç›®çª—å£, ç©ºç™½çš„åœ°æ–¹ç‚¹å‡»é¼ æ ‡å³é”®, é€‰æ‹©`Open C# Project`, æ‰“å¼€æ˜¯è¿™æ ·çš„

![](images2/Pasted%20image%2020250816122804.png)

ç„¶åæˆ‘ä»¬ç­‰å¾…å®ƒåŠ è½½é¡¹ç›®

![](images2/Pasted%20image%2020250816122748.png)

![](images2/Pasted%20image%2020250816122821.png)

è¿™ä¸ªæ—¶é—´æ¯”è¾ƒé•¿, éœ€è¦è€å¿ƒç­‰å¾…, ç„¶åç‚¹å‡»å°é”¤å­ç¼–è¯‘ä¸‹

![](images2/Pasted%20image%2020250816122917.png)

æˆ‘ä»¬å‘ç°ä¼šå‡ºç°é”™è¯¯

```
2>------- Started building project: Unity.Core
D:\ms\Microsoft Visual Studio\2022\Professional\MSBuild\Current\Bin\Roslyn\csc.exe /noconfig /unsafe+ /nowarn:0169,0649,3021,8981,1701,1702,2008 /fullpaths 
...
2>CSC: Error CS0006 : æœªèƒ½æ‰¾åˆ°å…ƒæ•°æ®æ–‡ä»¶â€œD:\project\unity\test-et81\Share\Analyzer\bin\Debug\Share.Analyzer.dllâ€
2>------- Finished building project: Unity.Core. Succeeded: False. Errors: 1. Warnings: 0
Build completed in 00:00:01.511
```

æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ä¸€ä¸ªæœªèƒ½æ‰¾åˆ°å…ƒæ•°æ®æ–‡ä»¶çš„é—®é¢˜

```
D:\project\unity\test-et81\Share\Analyzer\bin\Debug\Share.Analyzer.dll
```

ä¸è¦ç€æ€¥, æˆ‘ä»¬æ¥ç¼–è¯‘`ET`

### ğŸŒ¸ ç¼–è¯‘ET

æˆ‘ä»¬åœ¨å·¥ç¨‹ç›®å½•ä½¿ç”¨`Rider`æ‰“å¼€`ET`

![](images2/Pasted%20image%2020250816123156.png)

æ‰“å¼€é¡¹ç›®æ˜¯è¿™æ ·çš„

![](images2/Pasted%20image%2020250816123514.png)

æˆ‘ä»¬ç­‰å¾…åŠ è½½

![](images2/Pasted%20image%2020250816123450.png)

æˆ‘ä»¬ç›´æ¥ç‚¹å‡»ç¼–è¯‘

![](images2/Pasted%20image%2020250816123609.png)

å¯ä»¥çœ‹åˆ°æ—¥å¿—æ»šåŠ¨

![](images2/Pasted%20image%2020250816124454.png)

è¿™é‡Œæˆ‘æ˜¯èƒ½ç¼–è¯‘æˆåŠŸçš„

![](images2/Pasted%20image%2020250816124521.png)

ç„¶åæˆ‘ä»¬å†å›å¤´ç¼–è¯‘`Unity`å‘ç°å¯ä»¥äº†

![](images2/Pasted%20image%2020250816124604.png)

æ‰€ä»¥æˆ‘ä»¬å¾—åˆ°äº†ç»“è®º, ç¼ºå°‘`dll`æ˜¯å› ä¸ºæ²¡æœ‰ç¼–è¯‘`ET`å¯¼è‡´çš„

æˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨å¦å¤–ä¸€ç§æ›´ç®€å•çš„ç¼–è¯‘`ET`çš„æ–¹å¼

![](images2/Pasted%20image%2020250816145855.png)

ç‚¹å‡»`Compile`æˆ–è€…æ˜¯`F6`å¿«æ·é”®

![](images2/Pasted%20image%2020250817003416.png)

ä½†æ˜¯è¿™ä¸ª`ç¼–è¯‘æ—¶é—´`æ„Ÿè§‰è¦æ¯”åœ¨`Rider`ä¸­çš„æ—¶é—´é•¿, ç¼–è¯‘å‰æ˜¯ç©ºçš„

![](images2/Pasted%20image%2020250817003146.png)

ç¼–è¯‘åå‘ç°ç¡®å®éƒ½å‡ºæ¥äº†

![](images2/Pasted%20image%2020250817003458.png)

`.bytes`æ˜¯ä¸ºäº†è®©`Unity`è¯»å–æ›´åŠ æ–¹ä¾¿, å¯ä»¥é€šè¿‡`TextAsset`è¿›è¡ŒåŠ è½½, `.pdb`æ˜¯è°ƒè¯•æ–‡ä»¶

## ğŸŒ² è¿è¡Œé¡¹ç›®

![](images2/Pasted%20image%2020250816124818.png)

æˆ‘ä»¬ç‚¹å‡»`Unity`çš„è¿è¡Œåœºæ™¯, å¯ä»¥çœ‹åˆ°åœºæ™¯å¯ä»¥è¿è¡Œèµ·æ¥

![](images2/Pasted%20image%2020250816125145.png)

æˆ‘ä»¬å¯ä»¥å³é”®`Game`, èƒ½å¤Ÿçœ‹åˆ°ä¸€ä¸ª`Maximize`å¯ä»¥æŠŠçª—å£æ”¾å¤§åˆ°å…¨å±

![](images2/Pasted%20image%2020250816125114.png)

ç„¶åæ˜¯è¾“å…¥å¯†ç 

![](images2/Pasted%20image%2020250816125234.png)

è¿™ä¸ªæ²¡æœ‰åšé™åˆ¶éšä¾¿è¾“å…¥å³å¯, ç„¶åç‚¹å‡»è¿›å…¥

![](images2/Pasted%20image%2020250816125252.png)

æˆ‘ä»¬å¯ä»¥çœ‹åˆ°èƒ½è¿›å…¥æ¸¸æˆäº†

![](images2/Pasted%20image%2020250816125313.png)

è¿™å°±æ˜¯`ET`ç»™æˆ‘ä»¬æä¾›çš„`Demo`, é¼ æ ‡å³é”®ç‚¹å‡»å¯ä»¥ç§»åŠ¨è§’è‰²

![](images2/Pasted%20image%2020250816125422.png)

Ræ˜¯çƒ­é‡è½½, å¦‚æœæˆ‘ä»¬ä¿®æ”¹äº†`ET`çš„ä»£ç å¯ä»¥é‡æ–°`Build`ä¸€æ¬¡`ET`, ç„¶åç‚¹å‡»`R`å¯ä»¥ç›´æ¥çƒ­é‡è½½`dll`, ä¹Ÿå°±æ˜¯è¿™äº›ä¸œè¥¿

![](images2/Pasted%20image%2020250816125759.png)

åœ¨å·¥ç¨‹ç›®å½•çœ‹åˆ°çš„ä¼šä¸å¤ªä¸€æ ·, `Unity`å¯èƒ½éšè—äº†åç¼€

![](images2/Pasted%20image%2020250816150211.png)

Tæ˜¯åˆ‡æ¢åœ°å›¾

![](images2/Pasted%20image%2020250816125829.png)

æˆ‘è¿™é‡Œé¡¹ç›®å°±è¿è¡Œå¥½äº†

## ğŸŒ² è°ƒè¯•

### ğŸŒ¸ ç¬¬äºŒç§è¿è¡Œé¡¹ç›®çš„æ–¹å¼

æˆ‘ä»¬å›åˆ°`Rider`, æˆ‘æŒ‡çš„è¿™ä¸ª`Rider`æ˜¯æ‰“å¼€`Unity`ç«¯çš„, å‘ç°å®ƒçš„ä¸Šé¢ä¹Ÿæœ‰å‡ ä¸ªæŒ‰é’®ç±»ä¼¼`Unity`

![](images2/Pasted%20image%2020250817190534.png)

è¿™å‡ ä¸ªæŒ‰é’®çš„æ„æ€å’Œ`Unity`ä¸€æ ·, ç»¿è‰²çš„æŒ‰é’®å°±æ˜¯è¿è¡Œæ¸¸æˆ, å¾ˆæ˜æ˜¾`Rider`ç»™æˆ‘ä»¬æä¾›äº†å¿«æ·å…³è”

### ğŸŒ¸ æ‰“æ–­ç‚¹

æˆ‘ä»¬æƒ³è°ƒè¯•ç¬¬ä¸€æ­¥å°±éœ€è¦æ‰“æ–­ç‚¹, æ‰“æ–­ç‚¹å‘Šè¯‰ä½ éœ€è¦åœ¨å“ªé‡Œä¸­æ–­, æ‰“æ–­ç‚¹çš„æ–¹å¼æ˜¯é¼ æ ‡å·¦é”®ç‚¹å‡»åºå·, æ¯”å¦‚æˆ‘åœ¨`Init`å…¥å£ä¸Šæ‰“æ–­ç‚¹

![](images2/Pasted%20image%2020250817191305.png)

### ğŸŒ¸ å¯åŠ¨è°ƒè¯•

æ–­ç‚¹æ‰“å¥½äº†å·²ç»å®Œæˆ`50%`, ä¸‹é¢å°±å¼€å§‹è¿è¡Œé¡¹ç›®è°ƒè¯•, å¾€å³çœ‹, æœ‰ä¸€ä¸ªå°è™«å­ä¸€æ ·çš„å›¾æ ‡

![](images2/Pasted%20image%2020250817190922.png)
ç‚¹å‡»åä¼šè¿›å…¥åˆ°è°ƒè¯•æ¨¡å¼, 

![](images2/Pasted%20image%2020250817190936.png)

è¿™æ—¶å€™å†ç‚¹å‡»ç»¿è‰²æŒ‰é’®, è®©æ¸¸æˆé‡æ–°å¯åŠ¨å³å¯, å¦‚æœä¸æ˜¯é‡æ–°å¯åŠ¨æœ‰å¯èƒ½æ–­ä¸åˆ°, å› ä¸ºæˆ‘ä»¬æ‰“æ–­ç‚¹çš„ä½ç½®åœ¨`Init`å…¥å£

![](images2/Pasted%20image%2020250817191022.png)

ç„¶åç¨‹åºå°±ä¼šåœåœ¨ä½ æ‰“æ–­ç‚¹çš„åœ°æ–¹, ç„¶åæˆ‘ä»¬å¯ä»¥é€šè¿‡é¼ æ ‡æ”¾åœ¨å˜é‡ä¸Š, çœ‹é‡Œé¢çš„å±æ€§

![](images2/Pasted%20image%2020250817191621.png)

åˆ°è¿™é‡Œæ–­ç‚¹æ•™ç¨‹å®Œæˆ

# ğŸ å·¥ç¨‹è®²è§£

## ğŸŒ² ç›®å½•ç»“æ„

æˆ‘ä»¬å…ˆæ€»è§ˆä¸€ä¸‹ç›®å½•ç»“æ„, å…¶ä¸­`DotNet`è¿™ä¸ªåŒºåŸŸæ˜¯`æœåŠ¡ç«¯`, `Share`æ˜¯å·¥å…·åŒº, `Unity`æ˜¯`æ¸¸æˆç«¯`ä¹Ÿå¯ä»¥å«`å®¢æˆ·ç«¯`

![](images2/Pasted%20image%2020250815003251.png)

## ğŸŒ² Unity(å®¢æˆ·ç«¯)

### ğŸŒ¸ ETç¨‹åºå…¥å£

`ET`çš„ç¨‹åºå…¥å£æ–‡ä»¶æ˜¯è¿™ä¸ª`Assets/Scripts/Loader/MonoBehaviour/Init.cs`, å®ƒæ˜¯ç»‘å®šåœ¨`Glocal`åœºæ™¯ä¸‹çš„, æˆ‘ä»¬ç‚¹å‡»åœºæ™¯å°±èƒ½å¤Ÿçœ‹åˆ°ä¸€ä¸ª`Init.cs`

![](images2/Pasted%20image%2020250817143529.png)

æˆ‘ä»¬ç®€ç•¥çš„çœ‹çœ‹å®ƒéƒ½åšäº†ä»€ä¹ˆ

```cs
using System;
using CommandLine;
using UnityEngine;

namespace ET
{
	public class Init: MonoBehaviour
	{
		private void Start()
		{
			this.StartAsync().Coroutine();
		}
		
		private async ETTask StartAsync()
		{
			DontDestroyOnLoad(gameObject);
			
			AppDomain.CurrentDomain.UnhandledException += (sender, e) =>
			{
				Log.Error(e.ExceptionObject.ToString());
			};

			// å‘½ä»¤è¡Œå‚æ•°
			string[] args = "".Split(" ");
			Parser.Default.ParseArguments<Options>(args)
				.WithNotParsed(error => throw new Exception($"å‘½ä»¤è¡Œæ ¼å¼é”™è¯¯! {error}"))
				.WithParsed((o)=>World.Instance.AddSingleton(o));
			Options.Instance.StartConfig = $"StartConfig/Localhost";
			
			World.Instance.AddSingleton<Logger>().Log = new UnityLogger();
			ETTask.ExceptionHandler += Log.Error;
			
			World.Instance.AddSingleton<TimeInfo>();
			World.Instance.AddSingleton<FiberManager>();

			await World.Instance.AddSingleton<ResourcesComponent>().CreatePackageAsync("DefaultPackage", true);
			
			CodeLoader codeLoader = World.Instance.AddSingleton<CodeLoader>();
			await codeLoader.DownloadAsync();
			
			codeLoader.Start();
		}

		private void Update()
		{
			TimeInfo.Instance.Update();
			FiberManager.Instance.Update();
		}

		private void LateUpdate()
		{
			FiberManager.Instance.LateUpdate();
		}

		private void OnApplicationQuit()
		{
			World.Instance.Dispose();
		}
	}
}
```

#### ğŸŒµ Update

é¦–å…ˆæˆ‘ä»¬å¯ä»¥çœ‹åˆ°è¿™ä¸ªç±»æ˜¯ç»§æ‰¿äºæˆ‘ä»¬æœ€ç†Ÿæ‚‰çš„`MonoBehaviour`, åœ¨`Update`æ–¹æ³•é‡Œè¡¨ç¤ºæˆ‘ä»¬æ¯ä¸€å¸§æ›´æ–°çš„æ—¶å€™åšä»€ä¹ˆ, å¯ä»¥çœ‹åˆ°å®ƒåšäº†ä¸¤ä»¶äº‹

```cs
TimeInfo.Instance.Update();
FiberManager.Instance.Update();
```

`TimeInfo`æ˜¯`ET`æ¡†æ¶é‡Œçš„æ—¶é—´ç®¡ç†å™¨, `Update`ç”¨äºè®°å½•æ¯ä¸€å¸§çš„æ—¶é—´, åœ¨é‡Œé¢å°±è°ƒç”¨äº†ä¸€ä¸ªæ–¹æ³•`ClientNow`, è¿™ä¸ªå¾ˆå¥½ç†è§£, `DateTime.UtcNow.Ticks`æ˜¯ç°åœ¨çš„æ—¶é—´æˆ³, `this.dt1970.Ticks`æ˜¯`1970-01-01 00:00:00`çš„æ—¶é—´æˆ³, ä¸¤ä¸ªç›¸å‡å°±æ˜¯å½“å‰çš„æ—¶é—´æˆ³, æ³¨æ„`DateTime.UtcNow.Ticks`å¹¶ä¸æ˜¯ä»`1970`å¼€å§‹çš„, æ‰€ä»¥éœ€è¦ç›¸å‡, ä»£ç å¦‚ä¸‹

```cs
public long ClientNow()
{
	return (DateTime.UtcNow.Ticks - this.dt1970.Ticks) / 10000;
}
```

ç„¶åè¿™ä¸ªå˜é‡ä¿å­˜åœ¨`this.FrameTime = this.ClientNow();`ä¸‹é¢

ç„¶åæˆ‘ä»¬æ¥çœ‹`FiberManager`, ä»–æœ‰ä¸€ä¸ªå¥½å¬çš„åå­—å«åš`çº¤ç¨‹ç®¡ç†å™¨`, `çº¤ç¨‹`å°±æ˜¯æ¯”çº¿ç¨‹è¿˜è¦è½»é‡çš„çº§çš„çº¿ç¨‹, è¿™ä¸ç¦è®©æˆ‘æƒ³åˆ°äº†`åç¨‹`, å®ƒå¯ä»¥è´Ÿè´£çš„ä¸œè¥¿æœ‰

```cs
FiberAï¼šæˆ˜æ–—é€»è¾‘

é‡Œé¢è·‘å„ç§ Systemï¼šAIã€æŠ€èƒ½ã€è¡€é‡è®¡ç®—â€¦â€¦

å…¨éƒ¨å°é—­åœ¨è¿™ä¸ª Fiber å†…ï¼Œä¸ä¼šè¢«å¤–éƒ¨çº¿ç¨‹æ‰“æ‰°ã€‚

FiberBï¼šèŠå¤©é€»è¾‘

é‡Œé¢è·‘èŠå¤©ç›¸å…³çš„ Systemï¼šé¢‘é“æ¶ˆæ¯ã€å¥½å‹ç§èŠâ€¦â€¦

å’Œæˆ˜æ–— Fiber å®Œå…¨ç‹¬ç«‹ï¼Œäº’ä¸å¹²æ‰°ã€‚

ä¸¾ä¸ªä¾‹å­ï¼šå½“å®¢æˆ·ç«¯å­˜åœ¨å¤æ‚è®¡ç®—æ—¶ï¼Œå¯ä»¥å•ç‹¬åˆ›å»ºä¸€ä¸ªFiberè¿›è¡Œä¸“é—¨å¤„ç†ï¼Œæ¯æ¬¡é€šè¿‡Actorè¿›è¡Œæ¶ˆæ¯ä¼ é€’ï¼Œå†å°†è®¡ç®—ç»“æœé€šè¿‡Actorè¿”å›åˆ°ä¸»Fiberï¼ŒæŠŠæ›´å¤šçš„æ€§èƒ½ç•™ç»™ä¸»Fiberç”¨äºæ¸²æŸ“ä»¥åŠç‰©ç†è®¡ç®—ç­‰ã€‚

ETæ¡†æ¶çš„å®¢æˆ·ç«¯åˆå§‹æ—¶æœ‰ä¸¤ä¸ªFiberï¼Œåˆ†åˆ«æ˜¯Mainå’ŒNetClientï¼Œåˆ†åˆ«å¤„ç†æ¸¸æˆä¸»é€»è¾‘ä¸ç½‘ç»œé€»è¾‘ã€‚
æ‰€ä»¥ä¸ºäº†å……åˆ†å‘æŒ¥ä¸»æœºæ€§èƒ½ï¼Œå¯ä»¥æå‰è§„åˆ’å¥½ä¸»è¦åŠŸèƒ½çš„åˆ†ç±»ï¼Œä»¥ä¾¿äºåˆ›å»ºå¯¹åº”çš„Fiberã€‚
ä¾‹ï¼šæ¸¸æˆä¸»é€»è¾‘ï¼ˆåŒ…æ‹¬æ¸²æŸ“å’Œç‰©ç†è®¡ç®—ï¼‰ã€ç½‘ç»œé€»è¾‘ï¼ˆè´Ÿè´£æ¶ˆæ¯åˆ†å‘ï¼‰ã€æˆ˜æ–—ã€çƒ­æ›´æ–°ï¼ˆè¾¹ç©è¾¹ä¸‹ï¼‰ã€èµ„æºåŠ è½½ç­‰ç­‰ã€‚

... fiberè¿˜æœ‰å¾ˆå¤šç”¨é€” æˆ‘è¿™ä¸€çŸ¥åŠè§£åªèƒ½è®²è¿™äº›
```

å¼•ç”¨å¤§ä½¬çš„ä¸€å¼ å›¾

http://www.toxicstar.top/index.php/archives/266/

![](images2/Pasted%20image%2020250817154513.png)

#### ğŸŒµ Word

æˆ‘ä»¬è¿˜èƒ½çœ‹åˆ°ä¸€ä¸ªå…³é”®çš„ä¸œè¥¿`Word`

```cs
World.Instance
```

è¿™ä¸ªä¸œè¥¿æ˜¯ä¸€ä¸ª`å…¨å±€å•ä¾‹ç®¡ç†å™¨`, å®ƒä¹Ÿæ˜¯ä¸€ä¸ªå•ä¾‹, æ²¡é”™å°±æ˜¯å•ä¾‹è®¾è®¡æ¨¡å¼, å¯ä»¥åœ¨æ•´ä¸ªç¨‹åºçš„å£°æ˜å‘¨æœŸå†…éƒ½å¯ä»¥å‘é‡Œé¢å­˜ä¸œè¥¿æˆ–è€…æŠŠä¸œè¥¿å–å‡ºæ¥, æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ä¸‹é¢å‡ è¡Œä»£ç å°±æ˜¯ä½¿ç”¨`AddSingleton`å¾€`World`ä¸­å»æ³¨å†Œç»„ä»¶

```cs
World.Instance.AddSingleton<Logger>().Log = new UnityLogger();
ETTask.ExceptionHandler += Log.Error;
			
World.Instance.AddSingleton<TimeInfo>();
World.Instance.AddSingleton<FiberManager>();
```

æ³¨å†Œç»„ä»¶çš„æ–¹æ³•æ˜¯`AddSingleton`

```cs
public T AddSingleton<T>() where T : ASingleton, ISingletonAwake, new()
{
	T singleton = new();
	singleton.Awake();

	AddSingleton(singleton);
	return singleton;
}
```

æˆ‘ä»¬å¯ä»¥çœ‹åˆ°, æ³¨å†Œçš„å…·ä½“æ­¥éª¤å°±æ˜¯é€šè¿‡`new()`æ¨æ–­æ³›å‹æ¥åˆ›å»ºå¯¹è±¡, ç„¶åæ¥è°ƒç”¨`Awake`, è¿™ä¸ª`Awake`æˆ‘ä»¬ç§°ä¸ºæ³¨å†Œæ–¹æ³•, é‚£ä¹ˆå®ƒæ˜¯æ€ä¹ˆçŸ¥é“æˆ‘ä»¬çš„ç»„ä»¶ä¸­æœ‰`Awake`è¿™ä¸ªæ–¹æ³•å‘¢? æ²¡é”™å°±æ˜¯ç»§æ‰¿, æˆ‘ä»¬å¯ä»¥çœ‹åˆ°`public abstract class Singleton<T>: ASingleton where T: Singleton<T>`æ˜¯ä¸ªæŠ½è±¡ç±»

```cs
public class TimeInfo: Singleton<TimeInfo>, ISingletonAwake
{
	public void Awake()
	{
		this.dt1970 = new DateTime(1970, 1, 1, 0, 0, 0, DateTimeKind.Utc);
		this.dt = new DateTime(1970, 1, 1, 0, 0, 0, DateTimeKind.Utc);
		this.FrameTime = this.ClientNow();
	}
	æ­¤å¤„çœç•¥ä¸€ä¸‡è¡Œ......
}
```

æˆ‘ä»¬å¯ä»¥çœ‹åˆ°, å®ƒç»§æ‰¿äº†`Singleton`å¹¶å®ç°äº†é‡Œé¢çš„`Awake`æ–¹æ³•

### ğŸŒ¸ CodeLoader

è¿™ä¸ªä¸œè¥¿æ˜¯é‡ä¸­ä¹‹é‡, å®ƒçš„ä¸»è¦ç”¨é€”å’Œä»–çš„åå­—ä¸€æ ·, å°±æ˜¯åŠ è½½ä»£ç ç”¨çš„, ä¸ºäº†å®ç°çƒ­æ›´æ–°è€Œé‡‡å–ç¨‹åºå†…åŠ¨æ€åŠ è½½`dll`çš„æ–¹å¼

```cs
CodeLoader codeLoader = World.Instance.AddSingleton<CodeLoader>();
await codeLoader.DownloadAsync();			
codeLoader.Start();
```

æˆ‘ä»¬é¦–å…ˆçœ‹è¿™ä¸‰è¡Œ, ç¬¬ä¸€è¡Œå°±æ˜¯åˆ›å»ºä¸€ä¸ª`ä»£ç åŠ è½½å™¨`, ç„¶åæ˜¯`await codeLoader.DownloadAsync();`è¿™å¥è¯ä»å­—é¢æ„ä¹‰ä¸Šçœ‹æ˜¯`å¼‚æ­¥ä¸‹è½½`, è¯´åˆ°ä¸‹è½½æˆ‘ä»¬éƒ½ä¼šç¬¬ä¸€æ—¶é—´æƒ³åˆ°ä»è¿œç¨‹æœåŠ¡å™¨ä¸‹è½½

```cs
public async ETTask DownloadAsync()
{
	if (!Define.IsEditor)
	{
		this.dlls = await ResourcesComponent.Instance.LoadAllAssetsAsync<TextAsset>($"Assets/Bundles/Code/Unity.Model.dll.bytes");
		this.aotDlls = await ResourcesComponent.Instance.LoadAllAssetsAsync<TextAsset>($"Assets/Bundles/AotDlls/mscorlib.dll.bytes");
	}
}
```

ä½†æ˜¯æˆ‘ä»¬å‘ç°å®ƒæ˜¯åœ¨æœ¬åœ°å»åŠ è½½ä»£ç çš„, è¿™ä¸€ç‚¹è¿˜æ˜¯æ¯”è¾ƒå¥‡æ€ªçš„, æˆ‘ä»¬åé¢å†çœ‹, åŠ è½½`dll`æˆåŠŸå`this.dlls`å’Œ`this.aotDlls`å°±æ˜¯ä¸¤ä¸ªè£…æœ‰`TextAsset`çš„å­—å…¸, è€Œå­—å…¸çš„keyæ˜¯`Unity.Model.dll, Unity.Model.pdb, Unity.ModelView.dll, Unity.ModelView.pdb`è¿™äº›`dll`çš„åå­—, è¿™ä¸ª`TextAsset`ç±»å®˜æ–¹çš„ä»‹ç»æ˜¯`Represents a raw text or binary file asset.` å®ƒæ˜¯ä¸€ç§å¯ä»¥è¢«`Unity`åŠ è½½çš„èµ„æº, æ˜¯`dll`è¢«åŠ è½½è¿›æ¥çš„äºŒè¿›åˆ¶æ•°æ®

```cs
public async ETTask<Dictionary<string, T>> LoadAllAssetsAsync<T>(string location) where T : UnityEngine.Object
{
	AllAssetsHandle allAssetsOperationHandle = YooAssets.LoadAllAssetsAsync<T>(location);
	await allAssetsOperationHandle.Task;
	Dictionary<string, T> dictionary = new Dictionary<string, T>();
	foreach (UnityEngine.Object assetObj in allAssetsOperationHandle.AllAssetObjects)
	{
		T t = assetObj as T;
		dictionary.Add(t.name, t);
	}

	allAssetsOperationHandle.Release();
	return dictionary;
}
```

æˆ‘ä»¬å†æ¥çœ‹ä¸€ä¸‹`codeLoader.Start();`

```cs
public void Start()
{
	if (!Define.IsEditor)
	{
		byte[] modelAssBytes = this.dlls["Unity.Model.dll"].bytes;
		byte[] modelPdbBytes = this.dlls["Unity.Model.pdb"].bytes;
		byte[] modelViewAssBytes = this.dlls["Unity.ModelView.dll"].bytes;
		byte[] modelViewPdbBytes = this.dlls["Unity.ModelView.pdb"].bytes;
		// å¦‚æœéœ€è¦æµ‹è¯•ï¼Œå¯æ›¿æ¢æˆä¸‹é¢æ³¨é‡Šçš„ä»£ç ç›´æ¥åŠ è½½Assets/Bundles/Code/Unity.Model.dll.bytesï¼Œä½†çœŸæ­£æ‰“åŒ…æ—¶å¿…é¡»ä½¿ç”¨ä¸Šé¢çš„ä»£ç 
		//modelAssBytes = File.ReadAllBytes(Path.Combine(Define.CodeDir, "Unity.Model.dll.bytes"));
		//modelPdbBytes = File.ReadAllBytes(Path.Combine(Define.CodeDir, "Unity.Model.pdb.bytes"));
		//modelViewAssBytes = File.ReadAllBytes(Path.Combine(Define.CodeDir, "Unity.ModelView.dll.bytes"));
		//modelViewPdbBytes = File.ReadAllBytes(Path.Combine(Define.CodeDir, "Unity.ModelView.pdb.bytes"));

		if (Define.EnableIL2CPP)
		{
			foreach (var kv in this.aotDlls)
			{
				TextAsset textAsset = kv.Value;
				RuntimeApi.LoadMetadataForAOTAssembly(textAsset.bytes, HomologousImageMode.SuperSet);
			}
		}
		this.modelAssembly = Assembly.Load(modelAssBytes, modelPdbBytes);
		this.modelViewAssembly = Assembly.Load(modelViewAssBytes, modelViewPdbBytes);
	}
	else
	{
		if (this.enableDll)
		{
			byte[] modelAssBytes = File.ReadAllBytes(Path.Combine(Define.CodeDir, "Unity.Model.dll.bytes"));
			byte[] modelPdbBytes = File.ReadAllBytes(Path.Combine(Define.CodeDir, "Unity.Model.pdb.bytes"));
			byte[] modelViewAssBytes = File.ReadAllBytes(Path.Combine(Define.CodeDir, "Unity.ModelView.dll.bytes"));
			byte[] modelViewPdbBytes = File.ReadAllBytes(Path.Combine(Define.CodeDir, "Unity.ModelView.pdb.bytes"));
			this.modelAssembly = Assembly.Load(modelAssBytes, modelPdbBytes);
			this.modelViewAssembly = Assembly.Load(modelViewAssBytes, modelViewPdbBytes);
		}
		else
		{
			Assembly[] assemblies = AppDomain.CurrentDomain.GetAssemblies();
			foreach (Assembly ass in assemblies)
			{
				string name = ass.GetName().Name;
				if (name == "Unity.Model")
				{
					this.modelAssembly = ass;
				}
				else if (name == "Unity.ModelView")
				{
					this.modelViewAssembly = ass;
				}

				if (this.modelAssembly != null && this.modelViewAssembly != null)
				{
					break;
				}
			}
		}
	}
	
	(Assembly hotfixAssembly, Assembly hotfixViewAssembly) = this.LoadHotfix();

	World.Instance.AddSingleton<CodeTypes, Assembly[]>(new[]
	{
		typeof (World).Assembly, typeof (Init).Assembly, this.modelAssembly, this.modelViewAssembly, hotfixAssembly,
		hotfixViewAssembly
	});

	IStaticMethod start = new StaticMethod(this.modelAssembly, "ET.Entry", "Start");
	start.Run();
}
```

ç°é˜¶æ®µæˆ‘ä»¬åªå…³æ³¨ä¸€ä¸ªæ ¸å¿ƒä»£ç `Assembly.Load`å®ƒæ˜¯`C#`æä¾›çš„æ–¹æ³•, å¯ä»¥æŠŠ`dll`åŠ¨æ€åŠ è½½åˆ°å†…å­˜ä¸­, ç„¶åæˆ‘ä»¬å°±èƒ½æ–¹ä¾¿çš„ä½¿ç”¨`dll`ä¸­çš„ä»£ç äº†

```cs
namespace MyHotfix
{
    public class Hello
    {
        public static void Say() => Console.WriteLine("Hello Hotfix!");
    }
}
```

ç„¶åæˆ‘ä»¬ä½¿ç”¨`cs`çš„åå°„æ¥è°ƒç”¨è¿™ä¸ªä»£ç 

```cs
byte[] dllBytes = File.ReadAllBytes("MyHotfix.dll");
Assembly hotfixAss = Assembly.Load(dllBytes);

// åå°„è°ƒç”¨
Type helloType = hotfixAss.GetType("MyHotfix.Hello");
MethodInfo say = helloType.GetMethod("Say");
say.Invoke(null, null); // è¾“å‡º "Hello Hotfix!"
```

æ‰€ä»¥`ET`çš„`çƒ­æ›´æ–°åŸç†`å°±æ˜¯åŠ¨æ€æ›¿æ¢è¿™äº›`dll`, è¿™ä¹Ÿæ˜¯å®ƒä¸å¤ªå¥½ç†è§£çš„åŸå› 

### ğŸŒ¸ çƒ­æ›´æ–°

ä¸Šé¢çš„ä¸€å—æœ‰ä¸€ä¸ªç–‘é—®å°±æ˜¯ä¸ºä»€ä¹ˆçƒ­æ›´æ–°æ²¡æœ‰è¿œç¨‹ä¸‹è½½`dll`è€Œæ˜¯è¯»å–æœ¬åœ°çš„, åœ¨ä¸€ä¸ªå¤§ä½¬çš„å¸–å­é‡Œæ‰¾åˆ°äº†ç­”æ¡ˆ, æ˜¯å› ä¸º`ET8.1`æ ¹æœ¬æ²¡å»åšçƒ­æ›´æ–°

https://toxicstar.top/index.php/archives/281/

### ğŸŒ¸ åç¼–è¯‘

æˆ‘ä»¬æ¥ä¸‹æ¥ä½¿ç”¨`dnSpy`æ¥åç¼–è¯‘ç”Ÿæˆçš„`dll`æ¥çœ‹ä¸€ä¸‹é‡Œé¢çš„ä»£ç 

![](images2/Pasted%20image%2020250817085116.png)

ç›´æ¥æŠŠ`dll`æ‹–æ‹½åˆ°é‡Œé¢å³å¯, æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹`Model`, å¯ä»¥çœ‹åˆ°åç¼–è¯‘è¿‡æ¥çš„ä»£ç æ–‡ä»¶å’Œå·¥ç¨‹ä¸­éƒ½æ˜¯ä¸€ä¸€å¯¹åº”çš„

![](images2/Pasted%20image%2020250817085851.png)

æ‰€ä»¥`dll`å°±æ˜¯æˆ‘ä»¬ç¼–è¯‘è¿‡çš„ä»£ç , `Unity`å¯ä»¥ä»è¿œç¨‹æ‹‰å–æˆ‘ä»¬æ›´æ–°è¿‡çš„`dll`å¹¶æ›¿æ¢è¿™äº›, ç„¶åé‡æ–°å¯åŠ¨ç¨‹åºå°±å¯ä»¥å®ç°æ›¿æ¢ä»£ç çš„é€»è¾‘, ä¸ç”¨é‡æ–°å‘ç‰ˆæœ¬äº†, çœæ—¶çœåŠ›, ä½†æ˜¯å®é™…ä¸Šä¸æ˜¯æ‰€æœ‰çš„è„šæœ¬éƒ½æ”¯æŒçƒ­æ›´æ–°, æ¯”å¦‚æŒ‚åœ¨`inspector`ä¸­çš„`Monobehaver`è„šæœ¬å°±ä¸èƒ½åŠ å…¥çƒ­æ›´æ–°, ä½†æ˜¯å¯ä»¥é€šè¿‡å¥—å£³çš„å½¢å¼æ¥å®ç°çƒ­æ›´æ–°, è¿™æ˜¯æˆ‘äº†è§£åˆ°çš„

### ğŸŒ¸ ç¼–è¯‘è¿‡ç¨‹

ä½ å¯èƒ½æœ‰ä¸€ä¸ªç–‘é—®, `dll`æ˜¯å¦‚ä½•ç¼–è¯‘åˆ°æˆ‘ä»¬å·¥ç¨‹ä¸­çš„`Code`æ–‡ä»¶å¤¹çš„, è¿™ä¸ªæˆ‘ä»¬ä»¥åå†å»ç ”ç©¶, ä½ ç°åœ¨å¯ä»¥è®¤ä¸º`ET`ç»™æˆ‘ä»¬å°è£…äº†è¿™æ ·çš„æµç¨‹, æˆ‘ä»¬ç›´æ¥ç”¨å°±å¥½äº†, è¿™ä¸€ç« æˆ‘åé¢ä¼šè¯¦ç»†è¯´

### ğŸŒ¸ ä»£ç åˆ†åŒº

æˆ‘ä»¬å…ˆæ¥çœ‹è¿™ä¸ªæ¨¡å—, æ ¹æ®è§†é¢‘è®²è§£, è¿™æ˜¯ä½œè€…ç»™æˆ‘ä»¬æ ¹æ®åŠŸèƒ½åˆ†å‡ºæ¥çš„ä¸åŒçš„`ç¨‹åºé›†`, åœ¨æˆ‘ç†è§£å’ŒJavaä¸­çš„`Maven Module`å·®ä¸å¤š, å°±æ˜¯æ ¹æ®åˆ†å·¥æŠŠä¸€ä¸ªé¡¹ç›®æ‹†æˆä¸€å †å°é¡¹ç›®

- ä¸å®šä¹‰ç›¸å…³çš„æ”¾åœ¨`Model`ä¸­
- ä¸å®ç°ç›¸å…³çš„æ”¾åœ¨`Hotfix`ä¸­
- ä¸è§†å›¾å®šä¹‰ç›¸å…³çš„æ”¾åœ¨`ModelView`ä¸­
- ä¸è§†å›¾å®ç°ç›¸å…³çš„æ”¾åœ¨`HotfixView`ä¸­

ä¸¾ä¸ªä¾‹å­, æˆ‘ä»¬æ‰¾åˆ°

![](images2/Pasted%20image%2020250815012037.png)

ç„¶åçœ‹ä¸€ä¸‹å®ƒçš„ä»£ç 

```cs
using UnityEngine;

namespace ET.Client
{
	[ComponentOf(typeof(UI))]
	public class UILoginComponent: Entity, IAwake
	{
		public GameObject account;
		public GameObject password;
		public GameObject loginBtn;
	}
}
```

å®ƒçš„å®ç°å°±åœ¨`Hotfix`ä¸­

![](images2/Pasted%20image%2020250815012141.png)

```cs
using UnityEngine;
using UnityEngine.UI;

namespace ET.Client
{
	[EntitySystemOf(typeof(UILoginComponent))]
	[FriendOf(typeof(UILoginComponent))]
	public static partial class UILoginComponentSystem
	{
		[EntitySystem]
		private static void Awake(this UILoginComponent self)
		{
			ReferenceCollector rc = self.GetParent<UI>().GameObject.GetComponent<ReferenceCollector>();
			self.loginBtn = rc.Get<GameObject>("LoginBtn");
			
			self.loginBtn.GetComponent<Button>().onClick.AddListener(()=> { self.OnLogin(); });
			self.account = rc.Get<GameObject>("Account");
			self.password = rc.Get<GameObject>("Password");
		}

		
		public static void OnLogin(this UILoginComponent self)
		{
			LoginHelper.Login(
				self.Root(), 
				self.account.GetComponent<InputField>().text, 
				self.password.GetComponent<InputField>().text).Coroutine();
		}
	}
}
```

ä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬æ¯ä¸€ä¸ª`Model`å®ç°çš„ä¸œè¥¿éƒ½åœ¨`HotFix`ä¸­æ˜¯æœ‰ä¸€ä¸€å¯¹åº”çš„å®ç°æ–‡ä»¶çš„, å¹¶ä¸”è¿™ä¸ªæ–‡ä»¶æ˜¯`xxxComponentSystem`æ¥å‘½åçš„, è¿™ä¸ªæ–‡ä»¶åœ¨ç¼–è¯‘çš„æ—¶å€™å°±ä¼šç¼–è¯‘åˆ°æˆ‘ä»¬åˆšæ‰`CodeLoader`è¯»å–`ä»£ç èµ„äº§`çš„ç›®å½•

### ğŸŒ¸ ç¨‹åºé›†ä¾èµ–

ç¨‹åºé›†ä¹‹é—´æ˜¯å­˜åœ¨ä¾èµ–å…³ç³»çš„, æˆ‘ä»¬å¯ä»¥çœ‹ä¸€ä¸‹, `.asmdef`å°±æ˜¯è®°å½•å½“å‰`ç¨‹åºé›†`çš„ä¾èµ–æ–‡ä»¶

![](images2/Pasted%20image%2020250815012954.png)

æˆ‘ä»¬æ‰“å¼€å®ƒ

```json
{
    "name": "Unity.Core",
    "rootNamespace": "ET",
    "references": [
        "Unity.ThirdParty",
        "Unity.Mathematics",
        "MemoryPack"
    ],
    "includePlatforms": [],
    "excludePlatforms": [],
    "allowUnsafeCode": true,
    "overrideReferences": false,
    "precompiledReferences": [],
    "autoReferenced": true,
    "defineConstraints": [],
    "versionDefines": [],
    "noEngineReferences": false
}
```

å¯ä»¥çœ‹åˆ°`Core`ä¾èµ–`Unity.ThirdParty`, å› æ­¤å®ƒå¯ä»¥ä½¿ç”¨`Unity.ThirdParty`é‡Œé¢çš„ä»£ç 

## ğŸŒ² DotNet

å¾…å®Œå–„

## ğŸŒ² Tool

å¾…å®Œå–„

# ğŸ ECS

è¿™ä¸€ç« éå¸¸çš„é‡è¦, è™½ç„¶æˆ‘åœ¨å†™è¿™ç« çš„æ—¶å€™ä¹Ÿæ˜¯ä¸€çŸ¥åŠè§£çš„, ä½†æ˜¯å¦‚æœä¸å­¦ä¹ `ECS`è®¾è®¡å°±æ— æ³•æ·±å…¥ç†è§£å®ä½“å’Œç»„ä»¶

é¦–å…ˆ`ESC`å…¨ç¨‹æ˜¯`Entity-Component-System`, ä¹Ÿå°±æ˜¯`å®ä½“-ç»„ä»¶-ç³»ç»Ÿ`

## ğŸŒ² Entity

å®ƒæ˜¯ä¸€ä¸ªå¯¹è±¡, æˆ–è€…ä¸€ç±»å¯¹è±¡çš„æŠ½è±¡, å¯ä»¥è¡¨ç¤ºå…·ä½“çš„æŸä¸ªè§’è‰², æŸæ£µæ ‘, æŸä¸ªå®¹å™¨, æœ¬èº«ä¸åŒ…å«é€»è¾‘, åªæœ‰æˆå‘˜å˜é‡, å¯ä»¥æè¿°å¯¹è±¡çš„ç‰¹å¾, æ¯”å¦‚æˆ‘è®¾è®¡çš„`Entity`æ˜¯`Person`, é‚£ä¹ˆæˆ‘çš„å±æ€§å°±æ˜¯, `åå­—, å¹´é¾„, æ€§åˆ«, å‡ºç”Ÿå¹´æœˆæ—¥`

## ğŸŒ² Component

ç»„ä»¶, ç»„ä»¶å¯ä»¥é€šè¿‡æŒ‚è½½åˆ°å®ä½“ä¸Šå»å‘æŒ¥ä½œç”¨, æ¯”å¦‚æˆ‘æŠŠäººçš„èº«ä¸ŠæŒ‚è½½`å¤´, èº«ä½“, æ‰‹è‡‚, è…¿`, é‚£ä¹ˆè¿™å‡ ä¸ªéƒ½æ˜¯`Component`, ç»„ä»¶ä¸ä»…å¯ä»¥è¡¨å™¨å®˜, è€Œä¸”å¯ä»¥è¡¨è¡Œä¸º, æ¯”å¦‚`è¡Œèµ°, è·³è·ƒ, è·‘æ­¥`, è¿™äº›ä¹Ÿæ˜¯éœ€è¦é ç»„ä»¶å»å®ç°çš„, æœ‰äººä¼šé—®`è¡Œèµ°`ä¸ºä»€ä¹ˆä¸èƒ½ç›´æ¥ç»‘å®šåœ¨è…¿ä¸Šå‘¢, æˆ‘ä¹Ÿæ›¾ç»æœ‰è¿™ä¸ªç–‘é—®, GPTå›ç­”æˆ‘è¯´è¡Œèµ°æ˜¯å…¨èº«çš„è¿åŠ¨, éœ€è¦å„ä¸ªéƒ¨ä½å»é…åˆ, è¿™å°±éœ€è¦ä¸€ä¸ªç»„ä»¶å»æ”¯æ’‘, å¦‚æœåªæ˜¯`ä¼¸ä¸ªè…¿`è¿™ä¸ªåŠ¨ä½œå¯èƒ½ä¸éœ€è¦å…¨èº«é…åˆ, æ˜¯å¯ä»¥å†™åœ¨è…¿çš„`System`ä¸­çš„

## ğŸŒ² System

æˆ‘ä»¬åœ¨ä¸Šæ–‡æåˆ°äº†`Component`, è¿™ä¸ªé‡Œé¢ä¹Ÿåªèƒ½è¡¨ç¤ºçº¯æ•°æ®, å¦‚æœéœ€è¦å®ç°é€»è¾‘éœ€è¦å†™åœ¨å¯¹åº”çš„`system`ä¸­, æ¯”å¦‚æˆ‘å†™çš„ç»„ä»¶æ˜¯`LegComponent`é‡Œé¢æœ‰`è…¿çš„é•¿åº¦, è…¿çš„é¢œè‰²`, é‚£ä¹ˆæˆ‘ä»¬å®ç°é€»è¾‘çš„`system`å°±è¦å‘½åä¸º`LegComponentSystem`

## ğŸŒ² æ€»ç»“

`ECS`åˆä¸‰éƒ¨åˆ†ç»„æˆ, å…¶ä¸­`Entity`å’Œ`Component`éƒ½åªèƒ½è¡¨ç¤ºæ•°æ®, ä¸€èˆ¬æƒ…å†µä¸‹, ä¸€ä¸ªä¸»ä½“æ¯”å¦‚`äºº`, æ˜¯éœ€è¦å®šä¹‰æˆ`Entity`çš„, è€Œ`å¤´, æ‰‹è‡‚, è…¿`æ˜¯è¦å®šä¹‰æˆ`Component`çš„å› ä¸ºä»–ä»¬ä¸èƒ½å•ç‹¬å­˜åœ¨, éœ€è¦æŒ‚è½½åˆ°`äºº`ä¸Š, è€Œå¸¦æœ‰é€»è¾‘çš„éœ€è¦å†™åœ¨`System`ä¸­

# ğŸ å®ä½“

åœ¨ä¸Šä¸€ä¸ªç« èŠ‚æˆ‘ä»¬å·²ç»å­¦ä¹ è¿‡ECSè®¾è®¡æ€æƒ³äº†, é‚£ä¹ˆè¿™ä¸€ç« å°±æ˜¯å¯¹å®ä½“çš„å…·ä½“è®²è§£, åœ¨`ET`ä¸­å®ä½“ä¹Ÿæ˜¯æœ‰åˆ†ç±»çš„

```cs
Entity
 â”œâ”€â”€ Scene
 â”‚    â”œâ”€â”€ Unit (ç©å®¶/æ€ªç‰©/NPC)
 â”‚    â”‚     â””â”€â”€ Component (ç§»åŠ¨/AI/åŠ¨ç”»/è¡€æ¡...)
 â”‚    â”œâ”€â”€ UI (çª—å£)
 â”‚    â”‚     â””â”€â”€ Component (æŒ‰é’®/æ–‡æœ¬/é€»è¾‘...)
 â”‚    â””â”€â”€ Room (æˆ¿é—´)
 â”‚          â”œâ”€â”€ Player (ç©å®¶é€»è¾‘)
 â”‚          â””â”€â”€ Player (ç©å®¶é€»è¾‘)
```

## ğŸŒ² Entity

å®ä½“åŸºç±», æ‰€æœ‰çš„å®ä½“åŒ…æ‹¬ç»„ä»¶éƒ½æ˜¯ç»§æ‰¿äºè¿™ä¸ª

ä½ç½®`Unity/Assets/Scripts/Core/Entity/Entity.cs`

```cs
// abstract æŠ½è±¡ partial å¤šä¸ªåŒååˆå¹¶æˆä¸€ä¸ªclass
public abstract partial class Entity: DisposeObject, IPool
{
	public long InstanceId { get; protected set; }
	...æ­¤å¤„ç•¥å»ä¸€ä¸‡å­—
}
```

- æä¾›å”¯ä¸€å®ä¾‹`id` -> InstanceId
- å®ç°å¯¹è±¡çš„é”€æ¯é€»è¾‘
- å¯¹è±¡æ± æ¥å£ ä¸ç”¨çš„å¯¹è±¡æ”¾å…¥å¯¹è±¡æ± è€Œä¸æ˜¯ç›´æ¥é”€æ¯

æˆ‘ä»¬æ¥çœ‹çœ‹å®ƒçš„å¸¸ç”¨æ–¹æ³•

- IsComponent åˆ¤æ–­æ˜¯å¦æ˜¯ä¸€ä¸ªç»„ä»¶ æˆ–è€…æ˜¯ä¸€ä¸ªå®ä½“

## ğŸŒ² Scene

è¡¨ç¤ºä¸€ä¸ªæ¸¸æˆåœºæ™¯æˆ–é€»è¾‘ç©ºé—´

ä½ç½®`Unity/Assets/Scripts/Core/Entity/Scene.cs`

```cs
public class Scene: Entity, IScene
```

- ç®¡ç†åœºæ™¯ä¸­çš„`Unit` -> æ€ªç‰©/è§’è‰²/æ ‘/è‰ .... 
- å¸¸ç”¨ç»„ä»¶`UnitComponent`è´Ÿè´£ç®¡ç†Unit

## ğŸŒ² Unit

è¡¨ç¤ºåœºæ™¯ä¸­å¯æ“ä½œå¯¹è±¡ï¼ˆè§’è‰² / æ€ªç‰© / NPCï¼‰

- å¯ä»¥æŒ‚è½½å„ç§ Componentï¼ˆç§»åŠ¨ã€AIã€åŠ¨ç”»ã€è¡€æ¡â€¦ï¼‰
- å…·å¤‡äº¤äº’æ€§ï¼Œæ˜¯åœºæ™¯ä¸­æœ€å¸¸ç”¨çš„å®ä½“ä¹‹ä¸€

## ğŸŒ² UI

è¡¨ç¤ºä¸€ä¸ª UI çª—å£æˆ–ç•Œé¢

- å¯ä»¥æŒ‚è½½ä¸åŒ Componentï¼ˆæŒ‰é’®é€»è¾‘ã€æ–‡æœ¬ã€å…³é—­é€»è¾‘â€¦ï¼‰

## ğŸŒ² Room

è¡¨ç¤º ä¸€ä¸ªé€»è¾‘æˆ¿é—´ï¼Œå¸¸ç”¨äºå¤šäººæ¸¸æˆï¼ˆå¯¹å±€/æˆ˜æ–—/å‰¯æœ¬ï¼‰

- ç®¡ç†ä¸€ä¸ªå¯¹å±€ä¸­çš„æ‰€æœ‰ç©å®¶

## ğŸŒ² Player

è¡¨ç¤º ç©å®¶é€»è¾‘å®ä½“ï¼Œä¸€èˆ¬æŒ‚åœ¨ Room ä¸‹

- ä¸æ˜¯åœºæ™¯ä¸­çš„è§’è‰²æ¨¡å‹ï¼ˆé‚£æ˜¯ Unitï¼‰ï¼Œè€Œæ˜¯å’ŒæœåŠ¡å™¨äº¤äº’çš„é€»è¾‘å±‚
- ç®¡ç†ç©å®¶çš„è´¦æˆ·æ•°æ®ï¼ˆIDã€åå­—ã€åˆ†æ•°ã€è¿æ¥çŠ¶æ€â€¦ï¼‰

# ğŸ ç»„ä»¶

```
Scene (Entity)
 â”œâ”€â”€ CurrentScenesComponent   (ç®¡ç†å­åœºæ™¯)
 â”œâ”€â”€ UnitComponent            (ç®¡ç†æ‰€æœ‰Unit)
 â”œâ”€â”€ UIComponent              (ç®¡ç†æ‰€æœ‰UIçª—å£)
 â”œâ”€â”€ RoomManagerComponent     (ç®¡ç†æ‰€æœ‰æˆ¿é—´)
 â”œâ”€â”€ PlayerComponent          (ç®¡ç†æ‰€æœ‰ç©å®¶é€»è¾‘)
```

```
UI (Entity)
 â””â”€â”€ UILSRoomComponent  (æˆ¿é—´åˆ—è¡¨UIé€»è¾‘)
```

## ğŸŒ² CurrentScenesComponent

å¾…å®Œå–„

## ğŸŒ² UnitComponent

å¾…å®Œå–„

## ğŸŒ² UIComponent

å¾…å®Œå–„

## ğŸŒ² RoomManagerComponent

å¾…å®Œå–„

## ğŸŒ² UILSRoomComponent

å¾…å®Œå–„

## ğŸŒ² PlayerComponent

å¾…å®Œå–„

# ğŸ ç”Ÿå‘½å‘¨æœŸ

## ğŸŒ² IAwake

å¾…å®Œå–„

## ğŸŒ² IUpdate

å¾…å®Œå–„

## ğŸŒ² ILateUpdate

å¾…å®Œå–„

## ğŸŒ² IDestroy

å¾…å®Œå–„

## ğŸŒ² IScene

å¾…å®Œå–„ Fiber SceneType

# ğŸ é…è¡¨

é…è¡¨çš„ç”¨é€”ç”¨ä¸€å¥è¯æ€»ç»“å°±æ˜¯é€šè¿‡æ•°æ®è½½ä½“é…ç½®é™æ€æ•°æ®, è½½ä½“å¯ä»¥æ˜¯`excel, json, csv`ç­‰, é…ç½®å®Œæ¯•åé€šè¿‡ç”Ÿæˆå·¥å…·ç”Ÿæˆä»£ç , å¯ä»¥åœ¨æ¸¸æˆä¸­ç›´æ¥ä½¿ç”¨è¿™äº›æ•°æ®, è¿™å¯¹æˆ‘æ¥è¯´æ˜¯ä¸€ä¸ªæ–°é²œçš„ä¸œè¥¿, åœ¨å‰åå°å¼€å‘10å¹´æˆ‘éƒ½æ²¡æœ‰å¬è¯´è¿‡é…è¡¨è¿™ä¸ªä¸œè¥¿

## ğŸŒ² é…è¡¨ç›®å½•

é¦–å…ˆæˆ‘ä»¬è¦æ‰“å¼€`ET`çš„é…è¡¨ç›®å½•

![](images2/Pasted%20image%2020250823133508.png)

## ğŸŒ² é…è¡¨è§„åˆ™

![](images2/Pasted%20image%2020250823134329.png)

- ä¸‰è¡Œä¸‰åˆ—å¼€å§‹é…è¡¨, ä¹Ÿå°±æ˜¯ç¬¬ä¸€ä¸ªå­—æ®µä»`C3`å¼€å§‹
- ã€Œæ ‡è®°1ã€æ‰€åœ¨è¡Œæ˜¯å­—æ®µçš„ä¸­æ–‡è¯´æ˜
- ã€Œæ ‡è®°2ã€æ ‡è®°è¡Œæ˜¯å­—æ®µçš„å®é™…ä½¿ç”¨åç§°, ç”Ÿæˆä»£ç çš„æ—¶å€™å¯ä»¥çœ‹åˆ°
- ã€Œæ ‡è®°3ã€æ˜¯æ•°æ®ç±»å‹, ç”Ÿæˆä»£ç çš„æ—¶å€™å¯ä»¥çœ‹åˆ°
- ã€Œæ ‡è®°4å’Œ6ã€ä¸ºæ³¨é‡Š, ä½¿ç”¨`#`, æ ‡è®°ä¸€åˆ—å°±æ˜¯æ³¨é‡Šä¸€åˆ—, æ ‡è®°ä¸€è¡Œå°±æ˜¯æ³¨é‡Šä¸€è¡Œ, æˆ‘ç”¨é”™äº†å†™çš„æ±‰å­—
- ã€Œæ ‡è®°5ã€æ ‡è®°`s`çš„æ•°æ®åªç»™æœåŠ¡ç«¯ä½¿ç”¨, æ ‡è®°`c`çš„æ•°æ®åªç»™å®¢æˆ·ç«¯ä½¿ç”¨

## ğŸŒ² ç”Ÿæˆä»£ç 

æˆ‘ä»¬å°±ç”¨è‡ªå¸¦çš„æ•°æ®æ¥æµ‹è¯•, æ¥ä¸‹æ¥æˆ‘ä»¬éœ€è¦ä½¿ç”¨`ET`æä¾›çš„ä»£ç ç”Ÿæˆå·¥å…·æ¥ç”Ÿæˆå¯ä»¥ç›´æ¥ä½¿ç”¨æ•°æ®çš„`ç±»`

![](images/Pasted%20image%2020250824175609.png)

æˆ‘ä»¬ç‚¹å‡»ETæ ç›®ä¸­çš„`Build Tool`

![](images2/Pasted%20image%2020250823135659.png)

![](images2/Pasted%20image%2020250823135713.png)

ç„¶åæˆ‘ä»¬æ‰¾åˆ°ç›®å½•`Assets -> Model -> Generate -> ClientServer -> Config`

![](images2/Pasted%20image%2020250823140057.png)

ç„¶åæˆ‘ä»¬æ¥çœ‹çœ‹å®ƒç»™æˆ‘ä»¬ç”Ÿæˆçš„ä»£ç 

```cs
namespace ET
{
    [Config]
    public partial class UnitConfigCategory : Singleton<UnitConfigCategory>, IMerge
    {
        [BsonElement]
        [BsonDictionaryOptions(DictionaryRepresentation.ArrayOfArrays)]
        private Dictionary<int, UnitConfig> dict = new();
		
        public void Merge(object o)
        {
            UnitConfigCategory s = o as UnitConfigCategory;
            foreach (var kv in s.dict)
            {
                this.dict.Add(kv.Key, kv.Value);
            }
        }
		
        public UnitConfig Get(int id)
        {
            this.dict.TryGetValue(id, out UnitConfig item);

            if (item == null)
            {
                throw new Exception($"é…ç½®æ‰¾ä¸åˆ°ï¼Œé…ç½®è¡¨å: {nameof (UnitConfig)}ï¼Œé…ç½®id: {id}");
            }

            return item;
        }
		
        public bool Contain(int id)
        {
            return this.dict.ContainsKey(id);
        }

        public Dictionary<int, UnitConfig> GetAll()
        {
            return this.dict;
        }

        public UnitConfig GetOne()
        {
            if (this.dict == null || this.dict.Count <= 0)
            {
                return null;
            }
            
            var enumerator = this.dict.Values.GetEnumerator();
            enumerator.MoveNext();
            return enumerator.Current; 
        }
    }

	public partial class UnitConfig: ProtoObject, IConfig
	{
		/// <summary>Id</summary>
		public int Id { get; set; }
		/// <summary>Type</summary>
		public int Type { get; set; }
		/// <summary>åå­—</summary>
		public string Name { get; set; }
		/// <summary>ä½ç½®</summary>
		public int Position { get; set; }
		/// <summary>èº«é«˜</summary>
		public int Height { get; set; }

	}
}
```

æˆ‘ä»¬å¯ä»¥çœ‹åˆ°è¿™ä¸ªä»£ç ä¸­æœ‰åŒåçš„æ–‡ä»¶`UnitConfig`, è¿™ä¸ªå°±æ˜¯æˆ‘ä»¬æ•°æ®çš„å­—æ®µäº†, è¿˜æœ‰ä¸€ä¸ªä¸œè¥¿`UnitConfigCategory`, è¿™ä¸ªå°±æ˜¯æˆ‘ä»¬ä½¿ç”¨æ•°æ®çš„æ—¶å€™ç”¨çš„ç±», å¯ä»¥çœ‹åˆ°å®ƒé‡Œé¢æœ‰å¾ˆå¤šçš„æ–¹æ³•, æ¯”å¦‚Get, GetAll, æˆ‘ä»¬ä¹‹åä¼šå­¦ä¹ 

## ğŸŒ² åœ¨å“ªä½¿ç”¨

è¿™æ˜¯ä¸€ä¸ªå¥½é—®é¢˜, å› ä¸ºæˆ‘å°è¯•è¿‡åœ¨`Unity\Assets\Scripts\Loader\MonoBehaviour\Init.cs`è„šæœ¬ä¸­æ‰“å°

![](images/Pasted%20image%2020250824002035.png)

å‘ç°æ ¹æœ¬è¡Œä¸é€š, æç¤ºçš„æ˜¯æ‰¾ä¸åˆ°è¿™ä¸ªç±», åæ¥ç»è¿‡è°ƒç ”æ˜¯å› ä¸º`ET`æ˜¯åˆ†å±‚çš„, æˆ‘ä»¬ç”Ÿæˆçš„ä»£ç åœ¨`Unity.Loader`ç¨‹åºé›†å’Œ`Unity.Model`è®¿é—®ä¸é€š, ä¸ºæ­¤æˆ‘å°è¯•äº†æŠŠä¾èµ–åŠ ä¸Š

```json
D:\project\unity\test-et81\Unity\Assets\Scripts\Loader\Unity.Loader.asmdef

"references": [
    "Unity.ThirdParty",
    "Unity.Core",
    "HybridCLR.Runtime",
    "Unity.Model",
    "MemoryPack",
    "YooAsset",
    "YooAsset.Editor"
],
```

åŠ ä¸Šä¹‹åæˆ‘å…ˆç±»æ˜¯å¯ä»¥è®¿é—®äº†, ä½†æ˜¯è®¿é—®çš„æ—¶å€™æŠ¥é”™

![](images/Pasted%20image%2020250824002445.png)

```
FileNotFoundException: Could not load file or assembly 'Unity.Model, Version=0.0.0.0, Culture=neutral, PublicKeyToken=null' or one of its dependencies.

NullReferenceException: Object reference not set to an instance of an object
ET.Init.Update () (at Assets/Scripts/Loader/MonoBehaviour/Init.cs:48)

NullReferenceException: Object reference not set to an instance of an object
ET.Init.LateUpdate () (at Assets/Scripts/Loader/MonoBehaviour/Init.cs:54)
```

åæ¥ç»è¿‡ç ”ç©¶å‘ç°æ˜¯è¿™æ ·çš„, å› ä¸ºæˆ‘ä»¬è°ƒç”¨ä»£ç çš„æ—¶å€™, æ¸¸æˆè¿˜æ²¡æœ‰æŠŠæ•°æ®åŠ è½½åˆ°å­—å…¸ç±»ä¸­, æ‰€ä»¥å¯¼è‡´äº†è¿™ä¸ªé—®é¢˜, æ—¢ç„¶é—®é¢˜çŸ¥é“äº†, é‚£æˆ‘ä»¬å¦‚ä½•è§£å†³å‘¢, å…¶å®è€æ‰‹ä¸€ä¸‹å°±è§£å†³äº†, æˆ‘ä»¬å¯ä»¥æ”¾åˆ°`Update`ä¸­è¿›è¡Œæµ‹è¯•, å› ä¸ºæ¯ä¸€å¸§éƒ½ä¼šè°ƒç”¨ä¸€ä¸ª`Update`, å¹¶ä¸”åŠ ä¸Š`if`åˆ¤æ–­å³å¯

```cs
if (UnitConfigCategory.Instance != null)
{
	Debug.Log("æˆ‘åœ¨è¿™é‡Œ");
	var a = UnitConfigCategory.Instance.Get(1001);
	Debug.Log(a);
}
else
{
	Debug.Log("ç©ºç©ºå¦‚ä¹Ÿ");
}
```

å¯ä»¥çœ‹åˆ°æ•°æ®æ˜¯å¯ä»¥æ‰“å°å‡ºæ¥çš„

![](images/Pasted%20image%2020250824173915.png)

è¦è®°ä½ä½¿ç”¨`Debug.Log`ä¸è¦ä½¿ç”¨`cw`å¦åˆ™æ‰“å°ä¸å‡ºæ¥, è™½ç„¶æˆ‘ä»¬åšå‡ºæ¥äº†, ä½†æ˜¯ä¸å»ºè®®åœ¨`Init`æ–¹æ³•ä¸­æ¥å­¦ä¹ , æˆ‘ä»¬å¯ä»¥æ”¾ä¸€ä¸ªç©ºå¯¹è±¡åœ¨è§†å›¾ä¸Š, ç„¶ååœ¨ä¸»ç›®å½•æŒ‚è½½ä¸€ä¸ªè„šæœ¬ä¸Šå», è¿™æ ·ä¸ç”¨é…ç½®åŸŸä¹Ÿæ˜¯å¯ä»¥è®¿é—®çš„

### ğŸŒ¸ æ–°å»ºç©ºå¯¹è±¡å’Œè„šæœ¬

![](images/Pasted%20image%2020250824174057.png)

ç„¶åæŠŠä¸Šé¢åšçš„ä¾èµ–ç»™è¿˜åŸå›æ¥, æµ‹è¯•ä»£ç åˆ é™¤æ‰å°±è¡Œäº†

```json
D:\project\unity\test-et81\Unity\Assets\Scripts\Loader\Unity.Loader.asmdef

"references": [
    "Unity.ThirdParty",
    "Unity.Core",
    "HybridCLR.Runtime",
    "MemoryPack",
    "YooAsset",
    "YooAsset.Editor"
],
```

## ğŸŒ² ä½¿ç”¨æ–¹æ³•

ç»è¿‡ä¸Šé¢çš„å­¦ä¹ , æˆ‘ä»¬å·²ç»çŸ¥é“å¯ä»¥åœ¨å“ªé‡Œæµ‹è¯•é…è¡¨çš„æ•°æ®äº†, æˆ‘ä»¬å°±å¼€å§‹å­¦ä¹ 

![](images/Pasted%20image%2020250824175609.png)

### ğŸŒ¸ Get

åœ¨ä¸Šé¢æˆ‘ä»¬å·²ç»ä½¿ç”¨è¿‡äº†, è¿™ä¸ªå°±æ˜¯é€šè¿‡idå»æ‰¾ä¸€æ¡æ•°æ®

```cs
if (UnitConfigCategory.Instance != null)
{
	Debug.Log("æˆ‘åœ¨è¿™é‡Œ");
	var a = UnitConfigCategory.Instance.Get(1001);
	Debug.Log(a);
}
else
{
	Debug.Log("ç©ºç©ºå¦‚ä¹Ÿ");
}
```

```
"{ \"_t\" : \"UnitConfig\", \"_id\" : 1001, \"Type\" : 1, \"Name\" : \"ç±³å…‹å°”\", \"Position\" : 1, \"Height\" : 178, \"Weight\" : 68 }"
```

æˆ‘ä»¬å‘ç°çœ‹çš„éå¸¸ä¸æ¸…æ™°, å› ä¸ºæœ‰è½¬ä¹‰ç¬¦

https://learn.microsoft.com/zh-cn/visualstudio/debugger/string-visualizer-dialog-box?view=vs-2022

åæ¥å°è¯•äº†, å‘ç°è¿˜æ˜¯ä¸è¡Œ, `JsonUtility`æ˜¯å®˜æ–¹çš„åº“, æˆ‘æŠŠå¯¹è±¡è½¬åŒ–æˆ`json`æ‰“å°, ç»“æœæ˜¯`{}`, è¯´æ˜å¹¶æ²¡æœ‰è½¬æ¢æˆåŠŸ

```cs
void Update()
{
    if (UnitConfigCategory.Instance != null)
    {
        Debug.Log("æˆ‘åœ¨è¿™é‡Œ");
        var a = JsonUtility.ToJson(UnitConfigCategory.Instance.Get(1001), true);
        Debug.Log(a);
    } else
    {
        Debug.Log("ç©ºç©ºå¦‚ä¹Ÿ");
    }
}
```

`json`è½¬æ¢ä¸ç ”ç©¶äº†, æœ‰ç‚¹å¿ƒç´¯, å…ˆæŠŠæ–‡æ¡£åšå‡ºæ¥

### ğŸŒ¸ GetAll

è·å–æ‰€æœ‰çš„å‘—


# ğŸ ç¼–è¯‘åŸç†

å­¦ä¹ å®Œè¿™ä¸€ç« æˆ‘æœ‰äº†æ›´æ·±åˆ»çš„è®¤è¯†, æˆ‘æ¨èä¸çŸ¥é“çš„å¯ä»¥ç‚¹è¿›æ¥çœ‹ä¸€ä¸‹

[ç¼–è¯‘åŸç†](../ç¼–è¯‘åŸç†/ç¼–è¯‘åŸç†.md)

# ğŸ FAQ

## ğŸŒ² Unityé¡¹ç›®å´©æºƒåè°ƒè¯•æ…¢

è¿™ä¸ªæ˜¯æ­£å¸¸çš„, é¡¹ç›®å´©æºƒåå®ƒå¯èƒ½ä¼šæ¸…é™¤æ‰æ‰€æœ‰çš„`dll`é‡æ–°è¿›è¡Œç¼–è¯‘, æ‰€ä»¥å¯åŠ¨æ—¶ä¼šéå¸¸æ…¢

![](images2/Pasted%20image%2020250817190134.png)

# ğŸ å‚è€ƒèµ„æ–™

æˆ‘è¿™é‡Œé€‰æ‹©äº†ET`8.1`, å‚è€ƒè§†é¢‘å¦‚ä¸‹

## ğŸŒ² è§†é¢‘

- å’Œvè¯º
https://www.bilibili.com/video/BV1Ls421A7mS

- ä¸Šä¸Šç­¾UpUpDraw
https://www.bilibili.com/video/BV1rhYyeKExP

- å­—æ¯å“¥ET 6.0æ•™ç¨‹
https://www.bilibili.com/video/BV1xK4y1E76q

- çƒŸé›¨è¿·ç¦»åŠä¸–æ®‡
https://www.bilibili.com/video/BV1BJ411H7oZ

## ğŸŒ² æ–‡ç« 

- è·å…°çŒªå°ç°ç°
https://blog.csdn.net/m0_48781656/article/details/123483915?utm_source=chatgpt.com

- å®˜æ–¹ç¤¾åŒº
https://et-framework.cn/t/Course?utm_source=chatgpt.com

- ã€ETæ¡†æ¶ã€‘åŸºç¡€åŠå®è·µéš¾é¢˜è§£ç­” - å¹¸è¿æ·¦æ·¦
https://blog.csdn.net/u014685437/article/details/132273445

- å°å¼Ÿçš„ETç¬”è®°
https://www.yuque.com/et-xd/docs

